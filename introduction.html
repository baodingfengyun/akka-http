<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>1. 导读 &bull; Akka HTTP Chinese edition</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Akka Http: Modern, fast, asynchronous, streaming-first HTTP server and client."/>
<link rel="canonical" href="https://www.yangbajing.me/akka-http//introduction.html"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="lib/foundation/dist/js/foundation.min.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/css/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
<link rel="stylesheet" type="text/css" href="css/icons.css"/>
<link rel="stylesheet" type="text/css" href="css/page-6.css"/>
<link rel="stylesheet" type="text/css" href="css/banner.css"/>
<link rel="shortcut icon" href="images/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>
<link rel="manifest" href="images/manifest.json"/>
<meta name="msapplication-TileImage" content="images/mstile-150x150.png"/>
<meta name="msapplication-TileColor" content="#15a9ce"/>
<meta name="theme-color" content="#15a9ce"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) start -->
<script src="https://optanon.blob.core.windows.net/consent/159bb13d-6748-4399-806e-ac28db879785.js" type="text/javascript" charset="UTF-8"></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice (Production Standard, akka.io, en-GB) end -->
<!--Google Analytics-->
<script type="text/plain" class="optanon-category-2">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', '']);
_gaq.push(['_setDomainName', '']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})()
</script>
<!-- Google Tag Manager -->
<script type="text/plain" class="optanon-category-2">
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KBJGH35');
</script>
<!--Marketo-->
<script type="text/plain" class="optanon-category-3">
(function() {
var didInit = false;
function initMunchkin() {
if(didInit === false) {
didInit = true;
Munchkin.init('558-NCX-702', { 'asyncOnly': true, 'disableClickDelay': true });
}
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = '//munchkin.marketo.net/munchkin.js';
s.onreadystatechange = function() {
if (this.readyState == 'complete' || this.readyState == 'loaded') {
initMunchkin();
}
};
s.onload = initMunchkin;
document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
</head>

<body id="underlay" data-toggler="nav-open">
<div id="lightbend-banner" class="lightbend-banner akka full-width" data-category="OSS Lightbend Banner Impression" data-label="Akka Banner Impression">
<div class="wrapper">
<div class="brand">
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lightbend Logo - Akka Banner" href="https://www.lightbend.com/lightbend-platform" target="_blank">
<svg class="lightbend-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 372 80">
<title>Lightbend</title>
<g id="lightbend-reverse">
<path d="M1,59V76a3,3,0,0,0,3,3H88a3,3,0,0,0,3-3V59a167.38,167.38,0,0,1-45,6A167.38,167.38,0,0,1,1,59Z" fill="#fff" />
<path d="M88,1H4A3,3,0,0,0,1,4V53c14.57,4.2,29.65,7,45,7s30.43-2.8,45-7V4A3,3,0,0,0,88,1Z" fill="#fff" />
<g id="original_weight" data-name="original weight">
<path d="M107.2,20.08a2.14,2.14,0,1,1,4.27,0v32h13.6A2,2,0,0,1,127,54a1.94,1.94,0,0,1-1.94,2H109.31a2.15,2.15,0,0,1-2.11-2.16Z" fill="#fff" />
<path d="M135,19.32a2.47,2.47,0,0,1,4.91,0V20A2.47,2.47,0,0,1,135,20Zm.38,10.59a2.08,2.08,0,1,1,4.16,0V54.15a2,2,0,0,1-2.06,2.11,2.08,2.08,0,0,1-2.1-2.11Z" fill="#fff" />
<path d="M150.8,61.44a1.91,1.91,0,0,1-1.08-1.73,2,2,0,0,1,1.89-1.83,1.69,1.69,0,0,1,.92.27,17.63,17.63,0,0,0,9.88,3c6.15,0,10.15-3.4,10.15-9.93v-3.3c-2.43,3.24-5.83,5.89-11,5.89a12.9,12.9,0,0,1-13.12-13.07v-.11a13.21,13.21,0,0,1,24-7.56V29.91a2.07,2.07,0,0,1,2.06-2.11,2.11,2.11,0,0,1,2.1,2.11V51.13c0,4.32-1.29,7.61-3.56,9.88-2.49,2.48-6.21,3.73-10.64,3.73A21.87,21.87,0,0,1,150.8,61.44Zm21.87-20.73V40.6c0-5.72-5-9.45-10.26-9.45s-9.67,3.67-9.67,9.4v.1a9.45,9.45,0,0,0,9.67,9.51C167.7,50.16,172.67,46.32,172.67,40.71Z" fill="#fff" />
<path d="M186.22,18.41a2.08,2.08,0,1,1,4.16,0V32.93a10.57,10.57,0,0,1,9.56-5.45c6.75,0,10.69,4.53,10.69,11.18V54.15a2.08,2.08,0,1,1-4.16,0V39.68c0-5.18-2.81-8.42-7.72-8.42s-8.37,3.51-8.37,8.75V54.15a2,2,0,0,1-2,2.11,2.08,2.08,0,0,1-2.11-2.11Z" fill="#fff" />
<path d="M220.46,48.59V31.74h-2.27a1.89,1.89,0,0,1-1.84-1.83,1.86,1.86,0,0,1,1.84-1.84h2.27V21.48a2.06,2.06,0,0,1,2-2.1,2.14,2.14,0,0,1,2.1,2.1v6.59h7.24a1.91,1.91,0,0,1,1.89,1.84,1.86,1.86,0,0,1-1.89,1.83h-7.24V48.05c0,3.4,1.89,4.64,4.7,4.64a12,12,0,0,0,2.54-.37,1.8,1.8,0,0,1,1.78,1.78,1.73,1.73,0,0,1-1.19,1.62,10.57,10.57,0,0,1-4.1.75C223.86,56.47,220.46,54.26,220.46,48.59Z" fill="#fff" />
<path d="M242.65,18.41a2.08,2.08,0,1,1,4.16,0V33.69c2.27-3.35,5.56-6.21,10.69-6.21,6.7,0,13.34,5.29,13.34,14.47v.11c0,9.12-6.59,14.52-13.34,14.52a12.6,12.6,0,0,1-10.69-5.94v3.51a2.07,2.07,0,0,1-2.05,2.11,2.11,2.11,0,0,1-2.11-2.11Zm23.92,23.7V42c0-6.58-4.53-10.8-9.83-10.8A10.41,10.41,0,0,0,246.65,42v.11c0,6.48,4.91,10.8,10.09,10.8C262.14,52.86,266.57,48.86,266.57,42.11Z" fill="#fff" />
<path d="M290.17,56.64c-7.67,0-13.93-5.89-13.93-14.53V42c0-8,5.67-14.52,13.39-14.52,8.26,0,13,6.75,13,14.15a1.94,1.94,0,0,1-1.95,1.94H280.45c.59,6,4.86,9.45,9.83,9.45a11.4,11.4,0,0,0,8-3.24,1.83,1.83,0,0,1,1.19-.49,1.81,1.81,0,0,1,1.84,1.78,1.78,1.78,0,0,1-.65,1.35A14.2,14.2,0,0,1,290.17,56.64Zm8.26-16.15c-.43-5.07-3.35-9.5-8.91-9.5-4.86,0-8.53,4.05-9.07,9.5Z" fill="#fff" />
<path d="M309.5,29.91a2.08,2.08,0,1,1,4.16,0v3a10.57,10.57,0,0,1,9.56-5.45c6.75,0,10.69,4.53,10.69,11.18V54.15a2.08,2.08,0,1,1-4.16,0V39.68c0-5.18-2.81-8.42-7.72-8.42s-8.37,3.51-8.37,8.75V54.15a2,2,0,0,1-2.05,2.11,2.08,2.08,0,0,1-2.11-2.11Z" fill="#fff" />
<path d="M368.68,54.15a2.08,2.08,0,1,1-4.15,0V50.37c-2.27,3.35-5.57,6.21-10.7,6.21-6.69,0-13.33-5.29-13.33-14.47V42c0-9.12,6.64-14.52,13.33-14.52a12.61,12.61,0,0,1,10.7,5.94v-15a2,2,0,0,1,2.05-2.11,2.07,2.07,0,0,1,2.1,2.11ZM344.76,42v.11c0,6.58,4.59,10.8,9.83,10.8a10.43,10.43,0,0,0,10.1-10.8V42a10.38,10.38,0,0,0-10.1-10.75C349.19,31.2,344.76,35.2,344.76,42Z" fill="#fff" />
</g>
</g>
</svg>
</a>
</div>
<div class="nav">
<a class="banner-btn oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="See how Akka fits into Lightbend Platform [Button]" href="https://www.lightbend.com/akka-part-of-lightbend-platform" target="_blank">
<span>See how Akka fits into</span>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 274 80">
<title>Lightbend Platform</title>
<g id="lightbend-platform-reverse">
<g id="icon">
<path d="M1,59V76a3,3,0,0,0,3,3H88a3,3,0,0,0,3-3V59a167.38,167.38,0,0,1-45,6A167.38,167.38,0,0,1,1,59Z" fill="#fff" />
<path d="M88,1H4A3,3,0,0,0,1,4V53c14.57,4.2,29.65,7,45,7s30.43-2.8,45-7V4A3,3,0,0,0,88,1Z" fill="#fff" />
</g>
<g id="lightbend">
<path d="M104,14.73a1,1,0,1,1,2,0V29.4h6.24a.91.91,0,0,1,.89.92.88.88,0,0,1-.89.89H105a1,1,0,0,1-1-1Z" fill="#fff" />
<path d="M116.77,14.39a1.14,1.14,0,0,1,2.26,0v.32a1.14,1.14,0,0,1-2.26,0Zm.18,4.85a1,1,0,1,1,1.9,0V30.37a.93.93,0,0,1-.94,1,1,1,0,0,1-1-1Z" fill="#fff" />
<path d="M124,33.72a.89.89,0,0,1-.5-.8.91.91,0,0,1,.87-.84.8.8,0,0,1,.42.12,8.05,8.05,0,0,0,4.54,1.39C132.16,33.59,134,32,134,29V27.52a6,6,0,0,1-5,2.7,5.92,5.92,0,0,1-6-6v-.05a6.07,6.07,0,0,1,11-3.47V19.24a.94.94,0,0,1,.94-1,1,1,0,0,1,1,1V29a6.18,6.18,0,0,1-1.64,4.54,6.73,6.73,0,0,1-4.88,1.71A10,10,0,0,1,124,33.72Zm10-9.52v-.05a4.49,4.49,0,0,0-4.7-4.34,4.24,4.24,0,0,0-4.44,4.32v.05a4.34,4.34,0,0,0,4.44,4.36A4.52,4.52,0,0,0,134,24.2Z" fill="#fff" />
<path d="M140.26,14a1,1,0,1,1,1.91,0v6.66a4.84,4.84,0,0,1,4.39-2.5c3.1,0,4.9,2.08,4.9,5.13v7.11a1,1,0,1,1-1.9,0V23.73c0-2.38-1.29-3.87-3.55-3.87a3.77,3.77,0,0,0-3.84,4v6.49a.93.93,0,0,1-.94,1,1,1,0,0,1-1-1Z" fill="#fff" />
<path d="M156,27.82V20.09h-1a.87.87,0,0,1-.84-.85.85.85,0,0,1,.84-.84h1v-3a1,1,0,0,1,.94-1,1,1,0,0,1,1,1v3h3.32a.87.87,0,0,1,.87.84.85.85,0,0,1-.87.85h-3.32v7.48A1.9,1.9,0,0,0,160,29.7a5.31,5.31,0,0,0,1.16-.17.82.82,0,0,1,.82.82.79.79,0,0,1-.54.74,4.9,4.9,0,0,1-1.89.35A3.26,3.26,0,0,1,156,27.82Z" fill="#fff" />
<path d="M166.16,14a1,1,0,1,1,1.91,0v7A5.75,5.75,0,0,1,173,18.13c3.07,0,6.12,2.43,6.12,6.64v.05c0,4.19-3,6.67-6.12,6.67a5.78,5.78,0,0,1-4.91-2.73v1.61a1,1,0,0,1-.94,1,1,1,0,0,1-1-1Zm11,10.88V24.8c0-3-2.08-5-4.51-5A4.78,4.78,0,0,0,168,24.77v.05a4.78,4.78,0,0,0,4.64,5C175.11,29.78,177.14,27.94,177.14,24.85Z" fill="#fff" />
<path d="M188,31.51a6.37,6.37,0,0,1-6.4-6.66V24.8c0-3.7,2.61-6.67,6.15-6.67,3.79,0,5.95,3.1,5.95,6.49a.89.89,0,0,1-.89.89h-9.27A4.47,4.47,0,0,0,188,29.85a5.23,5.23,0,0,0,3.69-1.49.85.85,0,0,1,.54-.22.81.81,0,0,1,.55,1.44A6.52,6.52,0,0,1,188,31.51Zm3.79-7.41c-.2-2.33-1.54-4.36-4.09-4.36-2.23,0-3.91,1.86-4.16,4.36Z" fill="#fff" />
<path d="M196.84,19.24a1,1,0,1,1,1.91,0v1.39a4.84,4.84,0,0,1,4.38-2.5c3.1,0,4.91,2.08,4.91,5.13v7.11a1,1,0,1,1-1.91,0V23.73c0-2.38-1.29-3.87-3.54-3.87a3.77,3.77,0,0,0-3.84,4v6.49a.93.93,0,0,1-.94,1,1,1,0,0,1-1-1Z" fill="#fff" />
<path d="M224,30.37a1,1,0,1,1-1.91,0V28.64a5.77,5.77,0,0,1-4.9,2.85,6.25,6.25,0,0,1-6.13-6.64V24.8a6.29,6.29,0,0,1,6.13-6.67,5.78,5.78,0,0,1,4.9,2.73V14a.93.93,0,0,1,.94-1,1,1,0,0,1,1,1Zm-11-5.6v.05a4.64,4.64,0,0,0,4.51,5,4.79,4.79,0,0,0,4.64-5v-.05a4.76,4.76,0,0,0-4.64-4.93C215.05,19.84,213,21.67,213,24.77Z" fill="#fff" />
</g>
<path d="M103.36,41H114.8c6.68,0,10.72,4,10.72,9.68v.08c0,6.48-5,9.84-11.32,9.84h-4.68V69h-6.16Zm11,14.12c3.08,0,4.88-1.84,4.88-4.24V50.8c0-2.76-1.92-4.24-5-4.24h-4.76v8.56Z" fill="#fff" />
<path d="M128.89,39.8H135V69h-6.08Z" fill="#fff" />
<path d="M138.75,62.84v-.08c0-4.68,3.56-6.84,8.64-6.84a15.23,15.23,0,0,1,5.24.88v-.36c0-2.52-1.56-3.92-4.6-3.92a15.77,15.77,0,0,0-5.92,1.16L140.59,49a18.92,18.92,0,0,1,8.32-1.72c3.32,0,5.72.88,7.24,2.4s2.32,4,2.32,6.84V69h-5.88V66.68a8.24,8.24,0,0,1-6.48,2.72C142.07,69.4,138.75,67.08,138.75,62.84Zm14-1.4V60.36a9.43,9.43,0,0,0-3.88-.8c-2.6,0-4.2,1-4.2,3v.08c0,1.64,1.36,2.6,3.32,2.6C150.79,65.2,152.71,63.64,152.71,61.44Z" fill="#fff" />
<path d="M164,62.92V52.76h-2.56v-5.2H164V42.08h6.08v5.48h5v5.2h-5v9.16c0,1.4.6,2.08,2,2.08a6.18,6.18,0,0,0,3-.76v4.88a9,9,0,0,1-4.8,1.24C166.51,69.36,164,67.88,164,62.92Z" fill="#fff" />
<path d="M180.43,52.76h-2.52v-5h2.52V46.4a7,7,0,0,1,1.72-5.19,6.63,6.63,0,0,1,4.92-1.68,13.5,13.5,0,0,1,4.32.59v5a7.7,7.7,0,0,0-2.76-.52c-1.4,0-2.2.72-2.2,2.32v.84h4.92v5h-4.84V69h-6.08Z" fill="#fff" />
<path d="M192.84,58.4v-.08c0-6.16,5-11.16,11.64-11.16S216,52.08,216,58.24v.08c0,6.16-5,11.16-11.64,11.16S192.84,64.56,192.84,58.4Zm17.2,0v-.08a5.7,5.7,0,0,0-5.64-5.92c-3.48,0-5.56,2.68-5.56,5.84v.08a5.7,5.7,0,0,0,5.64,5.92C208,64.24,210,61.56,210,58.4Z" fill="#fff" />
<path d="M219.89,47.56H226v4.32c1.24-3,3.24-4.88,6.84-4.72v6.36h-.32c-4,0-6.52,2.44-6.52,7.56V69h-6.08Z" fill="#fff" />
<path d="M235.8,47.56h6.08v3a7.66,7.66,0,0,1,6.32-3.44,6.42,6.42,0,0,1,6,3.4,8.83,8.83,0,0,1,7-3.4c4.52,0,7.24,2.72,7.24,7.88V69h-6.08V57c0-2.88-1.28-4.36-3.56-4.36S255.2,54.16,255.2,57V69h-6.08V57c0-2.88-1.28-4.36-3.56-4.36s-3.68,1.48-3.68,4.36V69H235.8Z" fill="#fff" />
</g>
</svg>
</a>
<div class="drop-down">
<svg class="svg-chevon-circle-down" version="1.1" id="Chevron_circled_down" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
<path fill="#ffffff" d="M12.505,8.698L10,11L7.494,8.698c-0.198-0.196-0.518-0.196-0.718,0c-0.197,0.196-0.197,0.515,0,0.71l2.864,2.807
c0.199,0.196,0.52,0.196,0.717,0l2.864-2.807c0.199-0.195,0.198-0.514,0-0.71C13.024,8.502,12.704,8.502,12.505,8.698z M10,0.4
c-5.302,0-9.6,4.298-9.6,9.6c0,5.303,4.298,9.6,9.6,9.6s9.6-4.297,9.6-9.6C19.6,4.698,15.302,0.4,10,0.4z M10,18.354
c-4.615,0-8.354-3.74-8.354-8.354c0-4.614,3.739-8.354,8.354-8.354c4.613,0,8.354,3.74,8.354,8.354
C18.354,14.614,14.613,18.354,10,18.354z" />
</svg>
<div class="drop-down-content">
<div class="lightbend-family">
<a href="https://www.lagomframework.com" class="lagom oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Lagom - Logo Tag Line - Akka Banner">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 752 192">
<title>Lagom Framework</title>
<g>
<g id="Lagom">
<path d="M291.58,31.79h19.83v87.92c0,8.1,2.65,11.57,9.92,11.57a21.37,21.37,0,0,0,5.95-.66V148.3a35.73,35.73,0,0,1-9.42,1c-17.52,0-26.28-8.92-26.28-26.94Z" fill="#652b7c" />
<path d="M398.34,75.75V63.69h19.83v58.17c0,7.1,1.65,9.75,6.11,9.75,1.16,0,2.64-.17,4.13-.33v16a28.83,28.83,0,0,1-9.75,1.32c-4.79,0-8.59-.83-11.57-2.65a15.32,15.32,0,0,1-6.77-10.08C394.53,144.66,385,149,371.73,149A39.59,39.59,0,0,1,342,136.4c-7.93-8.43-11.89-18.67-11.89-31.07s4-22.64,11.89-30.9a39.59,39.59,0,0,1,29.75-12.56C385.12,61.87,395.2,67.82,398.34,75.75Zm-5.95,47.76a24.32,24.32,0,0,0,7.43-18.18,24.34,24.34,0,0,0-7.43-18.18,24.71,24.71,0,0,0-18-7.27,23.94,23.94,0,0,0-17.68,7.27c-4.63,4.8-6.94,10.91-6.94,18.18s2.31,13.39,6.94,18.18a23.94,23.94,0,0,0,17.68,7.27A24.71,24.71,0,0,0,392.39,123.51Z" fill="#652b7c" />
<path d="M495.67,63.69H515.5v69.4c0,20-2.81,32.23-14.05,41-7.93,6.11-17.68,9.25-29.41,9.25-15.54,0-28.92-4-40.32-12.06l9.58-14.71a50.5,50.5,0,0,0,28.59,9.09q11.66,0,18.34-5c5.29-3.8,7.94-10.91,7.94-21.15v-4.13c-4,7.1-13.89,12.23-27.11,12.23a40.51,40.51,0,0,1-29.74-12.23c-7.93-8.1-11.9-18.35-11.9-30.41s4-22.31,12.06-30.57a39.23,39.23,0,0,1,29.58-12.56c13.72,0,23.8,5.78,26.61,13.88ZM489.72,123a24.16,24.16,0,0,0,7.44-18,23.84,23.84,0,0,0-7.44-17.85,24.69,24.69,0,0,0-18-7.27A23.92,23.92,0,0,0,454,87.15,24.7,24.7,0,0,0,447.09,105,25,25,0,0,0,454,123a23.75,23.75,0,0,0,17.68,7.11C478.81,130.12,484.93,127.81,489.72,123Z" fill="#652b7c" />
<path d="M522.44,105.33a42.06,42.06,0,0,1,13.22-31.4c8.76-8.43,19.5-12.72,32.22-12.72s23.47,4.29,32.23,12.72a42.06,42.06,0,0,1,13.22,31.4,42,42,0,0,1-13.22,31.4c-8.76,8.43-19.5,12.72-32.23,12.72s-23.46-4.29-32.22-12.72A42,42,0,0,1,522.44,105.33ZM586.23,124a25.68,25.68,0,0,0,7.43-18.68,25,25,0,0,0-7.43-18.51,26.13,26.13,0,0,0-36.85,0,25.58,25.58,0,0,0-7.27,18.51A26.25,26.25,0,0,0,549.38,124a26.56,26.56,0,0,0,36.85,0Z" fill="#652b7c" />
<path d="M620.6,147V63.69h19.67v11.9C643.74,67.49,652,62,662.58,62,674,62,681.91,66.83,686,76.58,690.84,66.83,699.76,62,712.81,62c18,0,28.43,12.72,28.43,33.38v26.27c0,6.45,1.15,8.76,5.62,8.76a15,15,0,0,0,2.81-.33v16.69a28.48,28.48,0,0,1-8.6,1c-13.05,0-19.5-7.27-19.5-21.81V98.23c0-11.41-5.28-18.51-14.54-18.51s-16,8.09-16,19.33V147H671.34V98.23c0-11.41-5.46-18.51-14.88-18.51-9.25,0-16.19,8.09-16.19,19.33V147Z" fill="#652b7c" />
</g>
<g id="Icon">
<path d="M261,84l-70,34,70,34S260.78,84.27,261,84Z" fill="#652b7c" />
<polygon points="121 152 191 118 121 84 121 152" fill="#652b7c" />
<path d="M191,118l70,34c-.27,0-41.76,25-60.63,36.24a17.63,17.63,0,0,1-18,0C163.47,177,121,152,121,152Z" fill="#421540" />
<path d="M200.23,47.65C219.09,58.88,261,84,261,84l-70,34L121,84c.27,0,42.31-25.12,61.18-36.36A17.67,17.67,0,0,1,200.23,47.65Z" fill="#bf97c6" />
<path d="M145,20.58l-35,17,35,17S144.89,20.72,145,20.58Z" fill="#652b7c" />
<polygon points="75 54.58 110 37.58 75 20.58 75 54.58" fill="#652b7c" />
<path d="M110,37.58l35,17c-.14,0-20.88,12.5-30.31,18.12a8.81,8.81,0,0,1-9,0C96.23,67.08,75,54.58,75,54.58Z" fill="#421540" />
<path d="M114.61,2.4C124,8,145,20.58,145,20.58l-35,17-35-17c.14,0,21.16-12.56,30.59-18.18A8.84,8.84,0,0,1,114.61,2.4Z" fill="#bf97c6" />
<path d="M101,91,51,115.54l50,24.53S100.84,91.21,101,91Z" fill="#652b7c" />
<polygon points="1 140.07 51 115.54 1 91.02 1 140.07" fill="#652b7c" />
<path d="M51,115.54l50,24.53c-.19,0-29.83,18-43.3,26.14a12.48,12.48,0,0,1-12.89,0C31.34,158.1,1,140.07,1,140.07Z" fill="#421540" />
<path d="M57.59,64.79C71.06,72.9,101,91,101,91L51,115.54,1,91c.19,0,30.22-18.12,43.7-26.23A12.48,12.48,0,0,1,57.59,64.79Z" fill="#bf97c6" />
</g>
</g>
</svg>
<span>Opinionated Microservices Framework</span>
</a>
<a href="https://www.playframework.com" class="play oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Play - Logo Tag Line - Akka Banner">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 517 270">
<title>Play Framework</title>
<path d="M36.92,26.44l6.19-6.16a23,23,0,0,1,33.68,1.3l85.77,100a23,23,0,0,1-.22,30.17l-85.5,96.91a23,23,0,0,1-33.49,1.05l-6.17-6.17a23,23,0,0,1-1.4-31l51.16-61.39a23,23,0,0,0,.29-29.08l-52-65A23,23,0,0,1,36.92,26.44Z" fill="#92d13d" />
<path d="M86.94,151.18,35.78,212.57a23,23,0,0,0,1.4,31l6.17,6.17a23,23,0,0,0,33.49-1.05l18.51-21a101.68,101.68,0,0,0,10.89-45.91A101.62,101.62,0,0,0,90,126.54,23,23,0,0,1,86.94,151.18Z" fill="#49691f" />
<path d="M206.64,209.51H186.72V93.81h19.92v12.12c2.82-8.13,13-13.94,26.72-13.94,11.79,0,21.75,4.15,29.72,12.61,8.13,8.3,12.12,18.59,12.12,31s-4,22.75-12.12,31.21c-8,8.3-17.93,12.45-29.72,12.45-13.77,0-23.9-5.81-26.72-13.94Zm5.81-92.13a26.46,26.46,0,0,0,0,36.52,25.42,25.42,0,0,0,18.26,7.31,23.36,23.36,0,0,0,17.59-7.31c4.82-4.81,7.14-11,7.14-18.26s-2.32-13.44-7.14-18.26a23.39,23.39,0,0,0-17.59-7.3A25.46,25.46,0,0,0,212.45,117.38Z" fill="#49691f" />
<path d="M282,61.77h19.92v88.32c0,8.13,2.66,11.62,10,11.62a21.11,21.11,0,0,0,6-.67V178.8a35.53,35.53,0,0,1-9.46,1c-17.6,0-26.4-9-26.4-27.06Z" fill="#49691f" />
<path d="M385.25,105.93V93.81h19.92v58.43c0,7.14,1.66,9.8,6.14,9.8,1.17,0,2.66-.17,4.16-.33v16.1a28.82,28.82,0,0,1-9.8,1.33c-4.81,0-8.63-.83-11.62-2.66a15.41,15.41,0,0,1-6.81-10.13c-5.8,8.8-15.43,13.12-28.71,13.12a39.74,39.74,0,0,1-29.88-12.62c-8-8.46-12-18.76-12-31.21s4-22.74,12-31A39.77,39.77,0,0,1,358.53,92C372,92,382.1,98,385.25,105.93Zm-6,48a24.39,24.39,0,0,0,7.47-18.26,24.42,24.42,0,0,0-7.47-18.26,24.82,24.82,0,0,0-18.1-7.3,24.05,24.05,0,0,0-17.76,7.3c-4.65,4.82-7,11-7,18.26s2.32,13.45,7,18.26a24,24,0,0,0,17.76,7.31A24.79,24.79,0,0,0,379.28,153.9Z" fill="#49691f" />
<path d="M422.36,194.24a29.76,29.76,0,0,0,9.29,1.33,13.13,13.13,0,0,0,7.31-1.83c1.82-1.16,3.48-3.65,4.81-7.13l2.16-6-35-86.82H431l24.57,63.08,23.07-63.08h20.09L461.2,191.09q-3.74,9.71-9,14.94c-5,4.65-11.62,7-20.09,7a34.91,34.91,0,0,1-9.79-1.33Z" fill="#49691f" />
</svg>
<span>High velocity<br> web framework</span>
</a>
<a href="https://www.scala-lang.org" class="scala oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="Scala - Logo Tag Line - Akka Banner">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 590 270">
<title>Scala</title>
<path d="M200.7,142.39c6,11.79,15.6,17.6,29.05,17.6,14.44,0,19.59-7.64,19.59-15.11,0-5.15-1.83-8.63-6.64-11.79-4.82-3.32-8.3-4.81-16.93-8-10.63-4-16.77-7-23.41-12.29-6.64-5.48-9.79-13-9.79-22.74a28.28,28.28,0,0,1,10.29-22.58c7-5.81,15.44-8.63,25.56-8.63,15.77,0,27.72,6.31,35.69,18.76L249.34,87.78c-4.48-6.81-11.29-10.3-20.59-10.3-9.13,0-15.77,5.15-15.77,12.29,0,4.81,2,7.14,4.82,10,1.82,1.33,6.47,3.32,8.63,4.48l6,2.32,6.8,2.66c11,4.48,18.76,9.3,23.57,14.44s7.31,12.12,7.31,20.75c0,20.42-14.11,34.2-40.51,34.2-21.41,0-37.18-10-44.48-26.4Z" fill="#380d09" />
<path d="M354.25,104.71,342,117.49a28.14,28.14,0,0,0-21.24-9.13,25,25,0,0,0-18.43,7.47,27.76,27.76,0,0,0,0,37.52,25,25,0,0,0,18.43,7.47A28.14,28.14,0,0,0,342,151.69l12.29,12.78c-9,9.63-20.09,14.44-33.53,14.44-12.79,0-23.58-4.15-32.37-12.62s-13.12-19.09-13.12-31.7,4.32-23.08,13.12-31.54,19.58-12.78,32.37-12.78C334.16,90.27,345.28,95.08,354.25,104.71Z" fill="#380d09" />
<path d="M393.88,125.62C408,124.3,413,122.47,413,116c0-5.15-4.64-9.13-13.94-9.13q-13.44,0-22.41,10.95l-12.28-10.46c8.13-11.45,19.58-17.09,34.36-17.09,20.75,0,33.7,10,33.7,27.05v37c0,5.81,2.15,6.48,7,6.48h.5v15.43c-2,1.17-5.15,1.83-9.3,1.83-4.48,0-8-1.33-10.62-4a14.06,14.06,0,0,1-3-5.48c-5.81,6.8-15.27,10.29-28.39,10.29-18.42,0-30.87-10.13-30.87-25.4C357.7,136.41,369.15,127.78,393.88,125.62ZM391.56,162c13.28,0,21.41-6,21.41-16.6v-9.3a9.75,9.75,0,0,1-4.14,2.49c-3.82,1.33-6.31,1.66-14.28,2.49-11.62,1.33-17.43,5-17.43,10.79C377.12,158.33,382.43,162,391.56,162Z" fill="#380d09" />
<path d="M444.84,60.88h19.92V149.2c0,8.13,2.66,11.62,10,11.62a21.15,21.15,0,0,0,6-.67v17.76a35.56,35.56,0,0,1-9.47,1c-17.59,0-26.39-9-26.39-27.06Z" fill="#380d09" />
<path d="M521.71,125.62c14.11-1.32,19.09-3.15,19.09-9.62,0-5.15-4.64-9.13-13.94-9.13q-13.44,0-22.41,10.95l-12.28-10.46c8.13-11.45,19.58-17.09,34.36-17.09,20.75,0,33.7,10,33.7,27.05v37c0,5.81,2.15,6.48,7,6.48h.5v15.43c-2,1.17-5.15,1.83-9.3,1.83-4.48,0-8-1.33-10.62-4a13.94,13.94,0,0,1-3-5.48c-5.81,6.8-15.27,10.29-28.39,10.29-18.42,0-30.87-10.13-30.87-25.4C485.53,136.41,497,127.78,521.71,125.62ZM519.39,162c13.28,0,21.41-6,21.41-16.6v-9.3a9.73,9.73,0,0,1-4.15,2.49c-3.81,1.33-6.3,1.66-14.27,2.49-11.62,1.33-17.43,5-17.43,10.79C505,158.33,510.26,162,519.39,162Z" fill="#380d09" />
<path d="M30.55,94.83C32.4,97.38,48,102.19,71.27,107.2c23.27,4.46,47.47,22.07,66.29,16.64,12.73-3.68,26.54-36.47,26.54-41.34V82c0-3.4-2.55-6.13-6.88-8.4-17.75-9.07-21.11-12.41-27.69-10.6C95.37,72.43,35.06,67.61,30.55,94.83Z" fill="#380d09" fill-rule="evenodd" />
<path d="M30.55,161.41C32.4,164,48,168.77,71.27,173.79c26,4.74,48.61,20.19,67.44,14.75,12.73-3.68,25.39-34.58,25.39-39.46v-.48c0-3.39-2.55-6.13-6.88-8.39-13.54-7.2-31.43-15.13-38-13.32C85,136.3,39.26,138.37,30.55,161.41Z" fill="#380d09" fill-rule="evenodd" />
<path d="M30.36,109.14v.48h0A3.73,3.73,0,0,1,30.36,109.14Z" fill="#555" fill-rule="evenodd" />
<path d="M138.66,28.78C107.2,37.87,57.29,43,30.4,43h0V94.35a.8.8,0,0,0,.19.48c18.35,0,75-6,109.18-15.4a129,129,0,0,0,17.49-5.81c4.18-1.88,6.88-3.86,6.88-5.92V15.91C164.1,20.79,151.39,25.11,138.66,28.78Z" fill="#de3423" fill-rule="evenodd" />
<path d="M138.66,95.37c-18.83,5.43-44.24,9.47-67.39,11.83-15.54,1.59-30.06,2.42-40.87,2.42h0v51.31a.8.8,0,0,0,.19.48c18.35,0,75-6,109.18-15.39a130.38,130.38,0,0,0,17.49-5.81c4.18-1.89,6.88-3.86,6.88-5.92V82.5C164.1,87.37,151.39,91.69,138.66,95.37Z" fill="#de3423" fill-rule="evenodd" />
<path d="M138.66,162c-18.83,5.43-44.24,9.46-67.39,11.83-15.56,1.59-30.1,2.42-40.91,2.42V228c18.16,0,75.1-5.95,109.37-15.39,12.63-3.48,24.37-7.44,24.37-11.74V149.08C164.1,154,151.39,158.28,138.66,162Z" fill="#de3423" fill-rule="evenodd" />
</svg>
<span>The JVM language<br> of pragmatism</span>
</a>
<div class="akka">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 658 270">
<title>Akka</title>
<g id="akka-full-color">
<path d="M349.64,105.46V93.34h19.92v58.44c0,7.13,1.66,9.79,6.14,9.79,1.17,0,2.66-.17,4.15-.33v16.1a28.71,28.71,0,0,1-9.79,1.33c-4.81,0-8.63-.83-11.62-2.66a15.41,15.41,0,0,1-6.81-10.12C345.82,174.68,336.2,179,322.92,179A39.74,39.74,0,0,1,293,166.38c-8-8.46-12-18.75-12-31.2s4-22.75,12-31.05a39.77,39.77,0,0,1,29.88-12.61C336.36,91.52,346.49,97.49,349.64,105.46Zm-6,48a24.42,24.42,0,0,0,7.47-18.26,24.39,24.39,0,0,0-7.47-18.26,24.79,24.79,0,0,0-18.1-7.31,24,24,0,0,0-17.76,7.31c-4.65,4.81-7,11-7,18.26s2.32,13.44,7,18.26a24,24,0,0,0,17.76,7.3A24.82,24.82,0,0,0,343.67,153.44Z" fill="#0b5567" />
<path d="M388.48,177V61.31h19.76v67.56l30.87-35.53H462l-32.7,37.35L465.51,177H442.93l-26.39-33.7-8.3,9.3V177Z" fill="#0b5567" />
<path d="M470.82,177V61.31h19.75v67.56l30.88-35.53h22.91l-32.7,37.35L547.84,177H525.27l-26.4-33.7-8.3,9.3V177Z" fill="#0b5567" />
<path d="M607.87,105.46V93.34h19.92v58.44c0,7.13,1.66,9.79,6.14,9.79,1.17,0,2.66-.17,4.15-.33v16.1a28.71,28.71,0,0,1-9.79,1.33c-4.81,0-8.63-.83-11.62-2.66a15.41,15.41,0,0,1-6.81-10.12c-5.81,8.79-15.43,13.11-28.71,13.11a39.74,39.74,0,0,1-29.88-12.62c-8-8.46-12-18.75-12-31.2s4-22.75,12-31.05a39.77,39.77,0,0,1,29.88-12.61C594.59,91.52,604.72,97.49,607.87,105.46Zm-6,48a24.42,24.42,0,0,0,7.47-18.26,24.39,24.39,0,0,0-7.47-18.26,24.79,24.79,0,0,0-18.1-7.31A24,24,0,0,0,566,116.92c-4.65,4.81-7,11-7,18.26s2.32,13.44,7,18.26a24,24,0,0,0,17.76,7.3A24.82,24.82,0,0,0,601.9,153.44Z" fill="#0b5567" />
<path d="M230.26,212.82c35.88,28.67,58.91-57,1.74-72.82-48-13.29-96.33,9.5-144.66,62.74C87.34,202.74,176.67,170,230.26,212.82Z" fill="#0b5567" />
<path d="M88.08,202c34.41-35.69,91.64-75.53,144.9-60.75A46.09,46.09,0,0,1,259.9,160.6L209.48,58.78c-7.2-11.46-25.58-9.15-35.95-.26L40.29,170.07a27.4,27.4,0,0,0-1.56,40.15l0,0a27.4,27.4,0,0,0,36.51,2L88.14,202Z" fill="#15a9ce" />
</g>
</svg>
<span>Actor-based,<br> cloud native toolkit</span>
</div>
<div class="platform">
<span>From the creators of <strong>Akka</strong>, get technology enhancements, monitoring, and expert support with Lightbend Platform.</span>
<a class="oss-track-link-label" data-category="OSS Lightbend Banner Clicks" data-label="See Akka In Lightbend Platform [Button]" href="https://www.lightbend.com/akka-part-of-lightbend-platform" target="_blank">See Akka In Lightbend Platform</a>
</div>
</div>
<div class="title">The Lightbend Family</div>
</div>
</div>
</div>
</div>
</div>
<header class="site-header hide-for-large">
<div class="sticky-header clearfix">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

<button class="menu-icon float-right" type="button" data-toggle="underlay overlay"></button>
</div>
<div id="overlay" class="overlay-nav" data-toggler="nav-open">
<header class="nav-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka HTTP Chinese edition</a></h1>
</div>
<div class="nav-header-version">
Version 10.1.11
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div id="overlay-search-container" class="nav-header-search">
<input id="overlay-search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="nav-toc">
<ul>
  <li><a href="security.html" class="page">! Security Announcements !</a></li>
  <li><a href="release-notes/index.html" class="page">0. Release Notes</a></li>
  <li><a href="introduction.html#1-导读" class="active page">1. 导读</a>
  <ul>
    <li><a href="introduction.html#philosophy" class="header">Philosophy</a></li>
    <li><a href="introduction.html#using-akka-http" class="header">Using Akka HTTP</a></li>
    <li><a href="introduction.html#routing-dsl-for-http-servers" class="header">Routing DSL for HTTP servers</a></li>
    <li><a href="introduction.html#marshalling" class="header">Marshalling</a></li>
    <li><a href="introduction.html#streaming" class="header">Streaming</a></li>
    <li><a href="introduction.html#low-level-http-server-apis" class="header">Low-level HTTP server APIs</a></li>
    <li><a href="introduction.html#http-client-api" class="header">HTTP client API</a></li>
    <li><a href="introduction.html#the-modules-that-make-up-akka-http" class="header">The modules that make up Akka HTTP</a></li>
  </ul></li>
  <li><a href="usage.html" class="page">2. 使用</a></li>
  <li><a href="common/index.html" class="page">3. 数据类型 &amp; 抽像</a></li>
  <li><a href="server-side/index.html" class="page">4. Server API</a></li>
  <li><a href="client-side/index.html" class="page">5. Client API</a></li>
  <li><a href="extensions.html" class="page">6. Extensions</a></li>
  <li><a href="technologies.html" class="page">7. Supported Technologies</a></li>
  <li><a href="tipsandtricks.html" class="page">8. Tips And Tricks</a></li>
  <li><a href="contributing.html" class="page">9. Contributing</a></li>
  <li><a href="reference.html" class="page">10. Reference</a></li>
</ul>
</nav>
</div>
</header>
<div class="site-content-wrapper">
<aside class="sticky-sidebar show-for-large">
<header class="nav-header sticky-sidebar-header">
<div class="nav-header-title">
<h1><a href="index.html">Akka HTTP Chinese edition</a></h1>
</div>
<div class="nav-header-version">
Version 10.1.11
</div>
<div class="nav-header-groups">
<select class="supergroup" name="Language"><option class="group" value="group-scala">Scala</option><option class="group" value="group-java">Java</option></select>
</div>
<div class="nav-header-search">
<input id="search" type="search" class="search" placeholder="Search" />
</div>
</header>
<nav class="site-nav sticky-sidebar-contents">
<div class="nav-toc">
<ul>
  <li><a href="security.html" class="page">! Security Announcements !</a></li>
  <li><a href="release-notes/index.html" class="page">0. Release Notes</a></li>
  <li><a href="introduction.html#1-导读" class="active page">1. 导读</a>
  <ul>
    <li><a href="introduction.html#philosophy" class="header">Philosophy</a></li>
    <li><a href="introduction.html#using-akka-http" class="header">Using Akka HTTP</a></li>
    <li><a href="introduction.html#routing-dsl-for-http-servers" class="header">Routing DSL for HTTP servers</a></li>
    <li><a href="introduction.html#marshalling" class="header">Marshalling</a></li>
    <li><a href="introduction.html#streaming" class="header">Streaming</a></li>
    <li><a href="introduction.html#low-level-http-server-apis" class="header">Low-level HTTP server APIs</a></li>
    <li><a href="introduction.html#http-client-api" class="header">HTTP client API</a></li>
    <li><a href="introduction.html#the-modules-that-make-up-akka-http" class="header">The modules that make up Akka HTTP</a></li>
  </ul></li>
  <li><a href="usage.html" class="page">2. 使用</a></li>
  <li><a href="common/index.html" class="page">3. 数据类型 &amp; 抽像</a></li>
  <li><a href="server-side/index.html" class="page">4. Server API</a></li>
  <li><a href="client-side/index.html" class="page">5. Client API</a></li>
  <li><a href="extensions.html" class="page">6. Extensions</a></li>
  <li><a href="technologies.html" class="page">7. Supported Technologies</a></li>
  <li><a href="tipsandtricks.html" class="page">8. Tips And Tricks</a></li>
  <li><a href="contributing.html" class="page">9. Contributing</a></li>
  <li><a href="reference.html" class="page">10. Reference</a></li>
</ul>
</div>
</nav>
<footer class="nav-footer sticky-sidebar-footer">
<a href="https://akka.io"><img class="logo" src="images/akka-logo-reverse.svg"/></a>

</footer>
</aside>
<main class="fixed-shift-for-large expanded row">
<section class="site-content small-12 column">
<article class="page-content row">
<div class="small-12 column" id="docs">
<h1><a href="#1-导读" name="1-导读" class="anchor"><span class="anchor-link"></span></a>1. 导读</h1>
<table class="project-info">
<tr><th colspan="2">Project Info: Akka Http</th></tr>
  <tr><th>Artifact</th><td><div>com.typesafe.akka</div>
  <div>akka-http</div>
  <div>10.1.11</div></td></tr>
  <tr><th>JDK versions</th><td><div>Adopt OpenJDK 8</div><div>Adopt OpenJDK 11</div></td></tr>
  <tr><th>Scala versions</th><td>2.12.10, 2.11.12, 2.13.1</td></tr>
  <tr><th>JPMS module name</th><td>akka.http</td></tr>
  <tr><th>License</th><td><div><a href="https://opensource.org/licenses/Apache-2.0" target="_blank" rel="noopener noreferrer">Apache-2.0</a></div>
  </td></tr>
  <tr><th>Readiness level</th><td><div class="readiness-level"><a href="https://developer.lightbend.com/docs/lightbend-platform/introduction/getting-help/support-terminology.html#supported" target="_blank" rel="noopener">Supported</a>, <a href="https://www.lightbend.com/lightbend-platform-subscription" target="_blank" rel="noopener">Lightbend Platform Subscription</a> provides support</div>
  <div>Since 10.0.0, 2016-11-26</div>
  </td></tr>
  <tr><th>Home page</th><td><a href="https://akka.io">https://akka.io</a></td></tr>
  <tr><th>API documentation</th><td>
  <div><a href="https://doc.akka.io/api/akka-http/0.1.0-SNAPSHOT/akka/http/scaladsl/index.html" target="_blank" rel="noopener noreferrer">API (Scaladoc)</a></div>
  <div><a href="https://doc.akka.io/japi/akka-http/0.1.0-SNAPSHOT" target="_blank" rel="noopener noreferrer">API (Javadoc)</a></div>
  </td></tr>
  <tr><th>Forums</th><td>
  <div><a href="https://discuss.lightbend.com/tags/c/akka/akka-http" target="_blank" rel="noopener noreferrer">Lightbend Discuss</a></div>
  <div><a href="https://gitter.im/akka/akka" target="_blank" rel="noopener noreferrer">akka/akka Gitter channel</a></div>
  </td></tr>
  <tr><th>Release notes</th><td><a href="https://akka.io/blog/news-archive.html">akka.io blog</a></td></tr>
  <tr><th>Issues</th><td><a href="https://github.com/akka/akka-http/issues" target="_blank" rel="noopener noreferrer">Github issues</a></td></tr>
  <tr><th>Sources</th><td><a href="https://github.com/akka/akka-http" target="_blank" rel="noopener noreferrer">https://github.com/akka/akka-http</a></td></tr>
</table>

<p>The Akka HTTP modules implement a full server- and client-side HTTP stack on top of <em>akka-actor</em> and <em>akka-stream</em>. It&rsquo;s not a web-framework but rather a more general toolkit for providing and consuming HTTP-based services. While interaction with a browser is of course also in scope it is not the primary focus of Akka HTTP.</p>

<p>Akka HTTP 模块组在 <em>akka-actor</em> 和 <em>akka-stream</em> 的基础上实现了全HTTP栈（ 服务器-和客户端 ）的功能。它并不是一个 web 框架，而是一个更通用的工具箱，以便生成提供或消费基于 HTTP 的网络服务。虽然与浏览器进行互动是其功能的组成部分，但这个并不是 Akka HTTP 的主要目的（译注：简单来说，别把 Akka HTTP 模组只当作页面服务器）</p>

<p>Akka HTTP follows a rather open design and many times offers several different API levels for &ldquo;doing the same thing&rdquo;. You get to pick the API level of abstraction that is most suitable for your application. This means that, if you have trouble achieving something using a high-level API, there&rsquo;s a good chance that you can get it done with a low-level API, which offers more flexibility but might require you to write more application code.</p>

<p>Akka HTTP 采用的是一个开放式的设计，很多时候会提供不同抽象层次的 API 完成同一件事。 使用者可以选择更合适相关应用所需抽象度的 API。这里的意思指，如果当采用一个比较高抽象度的 API 无法实现开发需求的时候，很有可能开发人员可以采用一个比较底抽象度的 API 达到目的，虽然这样会有更多的灵活型，但也意味着需要写更多的代码。</p>

<h2><a href="#philosophy" name="philosophy" class="anchor"><span class="anchor-link"></span></a>Philosophy</h2>

<p><strong>理念</strong></p>

<p>Akka HTTP has been driven with a clear focus on providing tools for building integration layers rather than application cores. As such it regards itself as a suite of libraries rather than a framework.</p>

<p>Akka HTTP 的开发一直有一个明确的焦点，它是为整合层提供工具，而不是针对应用程序的核心。因而，它把自己当作工具库而不是一个框架。</p>

<p>A framework, as we’d like to think of the term, gives you a “frame”, in which you build your application. It comes with a lot of decisions already pre-made and provides a foundation including support structures that lets you get started and deliver results quickly. In a way a framework is like a skeleton onto which you put the “flesh” of your application in order to have it come alive. As such frameworks work best if you choose them before you start application development and try to stick to the framework&rsquo;s “way of doing things” as you go along.</p>

<p>框架，我们从名称联想到，给你一个”框“，在这个框里面你构建你的应用程序。它有很多已经被预设的开发决定，同时也提供了一个基础，这个基础包括了一些架构能让开发者可以快速的投入以及交付结果。某种意义上框架就像一个骨架，你把应用的”血肉“放进去，就可以衍生应用程序出来。如果你开始应用程序开发前就选择这些框架，并坚持框架的”工作方式“，那么这样的框架是最佳的。</p>

<p>For example, if you are building a browser-facing web application it makes sense to choose a web framework and build your application on top of it because the “core” of the application is the interaction of a browser with your code on the web-server. The framework makers have chosen one “proven” way of designing such applications and let you “fill in the blanks” of a more or less flexible “application-template”. Being able to rely on best-practice architecture like this can be a great asset for getting things done quickly.</p>

<p>举个例子，如果你构建一个面向浏览器的 Web 应用，那么，使用一个 Web 框架是应当的。因为这个应用的“核心”是浏览器与开发者在服务器端的代码进行互动。框架的作者已经挑选了一个”被证明有效“的方式为相关的应用程序开发设计，并让开发者或多或少地在这个”应用模板“里面进行”填空”。对开发者而言，可以依赖于已知的最佳实践架构下进行快速开发有时是很大的资产。</p>

<p>However, if your application is not primarily a web application because its core is not browser-interaction but some specialized maybe complex business service and you are merely trying to connect it to the world via a REST/HTTP interface a web-framework might not be what you need. In this case the application architecture should be dictated by what makes sense for the core not the interface layer. Also, you probably won’t benefit from the possibly existing browser-specific framework components like view templating, asset management, JavaScript- and CSS generation/manipulation/minification, localization support, AJAX support, etc.</p>

<p>可是，如果你的应用并不只是提供一个 web 应用程序（因为这个程序的核心并不是浏览器互动），而是一些特别的，甚至是复杂的，业务相关的应用服务，而你只是需要通过 REST/HTTP 提供接口连接。那，一个完整的 web 框架就未必是你所需要的。在这种情景下，应用架构应该取决于什么对核心更合理而不是对接口层面。而且，这个时候你并未能从某些框架中针对浏览器端开发的组件中获益，例如，视图模版，静态资产管理，JS 和 CSS 的生成器／调解器／缩减器，本地化处理，AJAX 支持，等等。</p>

<p>Akka HTTP was designed specifically as “not-a-framework”, not because we don’t like frameworks, but for use cases where a framework is not the right choice. Akka HTTP is made for building integration layers based on HTTP and as such tries to “stay on the sidelines”. Therefore you normally don’t build your application “on top of” Akka HTTP, but you build your application on top of whatever makes sense and use Akka HTTP merely for the HTTP integration needs.</p>

<p>Akka HTTP 被特意设计为“不是一个框架”，并非我们不喜欢框架，而是为了某些当架构不是最优解的应用场景。Akka HTTP 是针对建立基于 HTTP 的整合层面，并会尽量“保持边缘化”。因此，你并不需要“基于” Akka HTTP 开发，而应该使用任何合理基础开发应用，并只当有 HTTP 整合需求时引入 Akka HTTP。</p>

<p>On the other hand, if you prefer to build your applications with the guidance of a framework, you should give <a href="https://www.playframework.com/">Play Framework</a> or <a href="https://www.lagomframework.com/">Lagom</a> a try, which both use Akka internally.</p>

<p>另一方面而言，如果开发者有意愿在一个框架下指导开发应用，可以试试用 Play framework 或者 Lagom，两者都在其内部使用了 Akka 。</p>

<p>（译注：不用理采 Lightbend 的纯广告，你完全可以直接基于 Akka HTTP 进行开发。当然也建议尝试下 Play 或 Lagom。）</p>

<h2><a href="#using-akka-http" name="using-akka-http" class="anchor"><span class="anchor-link"></span></a>Using Akka HTTP</h2>

<p><strong>使用 Akka HTTP</strong></p>

<p>Akka HTTP is provided as independent modules from Akka itself under its own release cycle. Akka HTTP is <a href="compatibility-guidelines.html">compatible</a> with Akka 2.5 and any later 2.x versions released during the lifetime of Akka HTTP 10.1.x. The modules, however, do <em>not</em> depend on <code>akka-actor</code> or <code>akka-stream</code>, so the user is required to choose an Akka version to run against and add a manual dependency to <code>akka-stream</code> of the chosen version.</p>

<p>Akka HTTP 在其自身的发布周期内作为 Akka 的独立模块提供。Akka HTTP 与 Akka 2.5 和在 Akka HTTP 10.1.x 生命周期内 2.x 的更高版本兼容。但是，这些模块 <em>不</em> 能依赖 <code>akka-actor</code> 或 <code>akka-stream</code>，因此用户需要选择运行的 Akka 版本并向所选版本的 <code>akka-stream</code> 手动添加依赖。</p>

<dl>
  <dt>sbt</dt>
  <dd>
  <pre><code>&quot;com.typesafe.akka&quot; %% &quot;akka-http&quot;   % &quot;10.1.11&quot; 
&quot;com.typesafe.akka&quot; %% &quot;akka-stream&quot; % &quot;2.5.26&quot; // or whatever the latest version is
</code></pre></dd>
  <dt>Gradle</dt>
  <dd>
  <pre><code>compile group: &#39;com.typesafe.akka&#39;, name: &#39;akka-http_2.12&#39;,   version: &#39;10.1.11&#39;
compile group: &#39;com.typesafe.akka&#39;, name: &#39;akka-stream_2.12&#39;, version: &#39;2.5.26&#39;
</code></pre></dd>
  <dt>Maven</dt>
  <dd>
  <pre><code>&lt;dependency&gt;
  &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
  &lt;artifactId&gt;akka-http_2.12&lt;/artifactId&gt;
  &lt;version&gt;10.1.11&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
  &lt;artifactId&gt;akka-stream_2.12&lt;/artifactId&gt;
  &lt;version&gt;2.5.26&lt;/version&gt; &lt;!-- Or whatever the latest version is --&gt;
&lt;/dependency&gt;
</code></pre></dd>
</dl>
<p>Alternatively, you can bootstrap a new sbt project with Akka HTTP already configured using the <a href="http://www.foundweekends.org/giter8/">Giter8</a> template:</p>
<p>或者，你可以使用 <a href="http://www.foundweekends.org/giter8/">Giter8</a> 已经配置好的 Akka HTTP 模板来引导新的 sbt 项目。</p><div class="group-scala">
<pre class="prettyprint"><code class="language-sh">sbt -Dsbt.version=0.13.15 new https://github.com/akka/akka-http-quickstart-scala.g8
</code></pre></div><div class="group-java">
<pre class="prettyprint"><code class="language-sh">sbt -Dsbt.version=0.13.15 new https://github.com/akka/akka-http-quickstart-java.g8
</code></pre>
<p>From there on the prepared project can be built using Gradle or Maven.</p>
<p>可以使用 Gradle 或 Maven 从构建准备好的项目开始。</p></div>
<p>More instructions can be found on the <span class="group-scala"><a href="https://github.com/akka/akka-http-quickstart-scala.g8">template project</a></span><span class="group-java"><a href="https://github.com/akka/akka-http-quickstart-java.g8">template project</a></span>.</p>
<p>更多说明在 <span class="group-scala"><a href="https://github.com/akka/akka-http-quickstart-scala.g8">template project</a></span><span class="group-java"><a href="https://github.com/akka/akka-http-quickstart-java.g8">template project</a></span> 能找到。</p>
<h2><a href="#routing-dsl-for-http-servers" name="routing-dsl-for-http-servers" class="anchor"><span class="anchor-link"></span></a>Routing DSL for HTTP servers</h2>
<p><strong>HTTP 服务端的路由 DSL</strong></p>
<p>The high-level, routing API of Akka HTTP provides a DSL to describe HTTP &ldquo;routes&rdquo; and how they should be handled. Each route is composed of one or more level of <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/server/Directives.html" title="akka.http.javadsl.server.Directives"><code>Directives</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/server/Directives.html" title="akka.http.scaladsl.server.Directives"><code>Directives</code></a></span> that narrows down to handling one specific type of request.</p>
<p>Akka HTTP 在高抽像程度的 API 里提供了一个 DSL 来描述 HTTP “路由”和其相关处理。每个路由包含一或多级 <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/server/Directives.html" title="akka.http.javadsl.server.Directives"><code>Directives</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/server/Directives.html" title="akka.http.scaladsl.server.Directives"><code>Directives</code></a></span>，每个路由则专注于处理一个类型的请求。</p>
<p>For example one route might start with matching the <code>path</code> of the request, only matching if it is &ldquo;/hello&rdquo;, then narrowing it down to only handle HTTP <code>get</code> requests and then <code>complete</code> those with a string literal, which will be sent back as a HTTP OK with the string as response body.</p>
<p>举个例子，一个路由通过 <code>path</code> 匹配请求（路径），只有当路径是 <code>/hello</code> 时，才处理相关的 HTTP <code>get</code> 请求并 <code>complete</code> （完成返回）返回字符串， 该文本将作为一个 HTTP OK 响应中的正文。</p>
<p>The <span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/server/index.html#Route=akka.http.scaladsl.server.RequestContext=%3Escala.concurrent.Future[akka.http.scaladsl.server.RouteResult]" title="akka.http.scaladsl.server"><code>Route</code></a></span> <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/scaladsl/server/Route.html" title="akka.http.scaladsl.server.Route"><code>Route</code></a></span> created using the Route DSL is then &ldquo;bound&rdquo; to a port to start serving HTTP requests:</p>
<p>使用路由 DSL 生成的 <span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/server/index.html#Route=akka.http.scaladsl.server.RequestContext=%3Escala.concurrent.Future[akka.http.scaladsl.server.RouteResult]" title="akka.http.scaladsl.server"><code>Route</code></a></span> <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/scaladsl/server/Route.html" title="akka.http.scaladsl.server.Route"><code>Route</code></a></span> 对像 “绑定” 到端口以开始服务 HTTP 请求：</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/scala/docs/http/scaladsl/HttpServerExampleSpec.scala#L318-L348" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.actor.ActorSystem
import akka.http.scaladsl.Http
import akka.http.scaladsl.model._
import akka.http.scaladsl.server.Directives._
import akka.stream.ActorMaterializer
import scala.io.StdIn

object WebServer {
  def main(args: Array[String]) {

    implicit val system = ActorSystem(&quot;my-system&quot;)
    implicit val materializer = ActorMaterializer()
    // needed for the future flatMap/onComplete in the end
    implicit val executionContext = system.dispatcher

    val route =
      path(&quot;hello&quot;) {
        get {
          complete(HttpEntity(ContentTypes.`text/html(UTF-8)`, &quot;&lt;h1&gt;Say hello to akka-http&lt;/h1&gt;&quot;))
        }
      }

    val bindingFuture = Http().bindAndHandle(route, &quot;localhost&quot;, 8080)

    println(s&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;)
    StdIn.readLine() // let it run until user presses return
    bindingFuture
      .flatMap(_.unbind()) // trigger unbinding from the port
      .onComplete(_ =&gt; system.terminate()) // and shutdown when done
  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/java/docs/http/javadsl/HttpServerMinimalExampleTest.java#L7-L51" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.NotUsed;
import akka.actor.ActorSystem;
import akka.http.javadsl.ConnectHttp;
import akka.http.javadsl.Http;
import akka.http.javadsl.ServerBinding;
import akka.http.javadsl.model.HttpRequest;
import akka.http.javadsl.model.HttpResponse;
import akka.http.javadsl.server.AllDirectives;
import akka.http.javadsl.server.Route;
import akka.stream.ActorMaterializer;
import akka.stream.javadsl.Flow;

import java.util.concurrent.CompletionStage;

public class HttpServerMinimalExampleTest extends AllDirectives {

  public static void main(String[] args) throws Exception {
    // boot up server using the route as defined below
    ActorSystem system = ActorSystem.create(&quot;routes&quot;);

    final Http http = Http.get(system);
    final ActorMaterializer materializer = ActorMaterializer.create(system);

    //In order to access all directives we need an instance where the routes are define.
    HttpServerMinimalExampleTest app = new HttpServerMinimalExampleTest();

    final Flow&lt;HttpRequest, HttpResponse, NotUsed&gt; routeFlow = app.createRoute().flow(system, materializer);
    final CompletionStage&lt;ServerBinding&gt; binding = http.bindAndHandle(routeFlow,
        ConnectHttp.toHost(&quot;localhost&quot;, 8080), materializer);

    System.out.println(&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;);
    System.in.read(); // let it run until user presses return

    binding
        .thenCompose(ServerBinding::unbind) // trigger unbinding from the port
        .thenAccept(unbound -&gt; system.terminate()); // and shutdown when done
  }

  private Route createRoute() {
    return concat(
        path(&quot;hello&quot;, () -&gt;
            get(() -&gt;
                complete(&quot;&lt;h1&gt;Say hello to akka-http&lt;/h1&gt;&quot;))));
  }
}</code></pre></dd>
</dl>
<p>When you run this server, you can either open the page in a browser, at the following url: <a href="http://localhost:8080/hello">http://localhost:8080/hello</a>, or call it in your terminal, via <code>curl http://localhost:8080/hello</code>.</p>
<p>当你运行这个服务时，你也可以在下面连接：<a href="http://localhost:8080/hello">http://localhost:8080/hello</a> 打开浏览器页面，或则在你的终端里调用 <code>curl http://localhost:8080/hello</code> （访问）。</p>
<h2><a href="#marshalling" name="marshalling" class="anchor"><span class="anchor-link"></span></a>Marshalling</h2>
<p><strong>转换</strong></p>
<p>Transforming request and response bodies between over-the-wire formats and objects to be used in your application is done separately from the route declarations, in marshallers, which are pulled in implicitly using the &ldquo;magnet&rdquo; pattern. This means that you can <code>complete</code> a request with any kind of object as long as there is an implicit marshaller available in scope.</p>
<p>在 marshaller 中，在线格式和对像之间转换请求和响应正文在你的应用程序里面是和路由声明分开的，这些是使用“magent”模式隐式引入的。 这意味着你能以任何对像 <code>complete</code> 一个请求，只要范围内有可用的隐式 marshaller。 </p><div class="group-scala">
<p>Default marshallers are provided for simple objects like String or ByteString, and you can define your own for example for JSON. An additional module provides JSON serialization using the spray-json library (see <a href="common/json-support.html">JSON Support</a> for details):</p>
<p>默认 marshaller 提供了简单对像如 <code>String</code> 或 <code>ByteString</code> （的编组转换功能）。例如，你可以定义你自己的 JSON （编组转换）。附加模块使用 spary-json 库提供 JSON 序列化 (有关详细信息见 <a href="common/json-support.html">JSON 支持</a>):</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "com.typesafe.akka" %% "akka-http-spray-json" % "10.1.11"</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  compile group: 'com.typesafe.akka', name: 'akka-http-spray-json_2.12', version: '10.1.11'
}</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
  &lt;artifactId&gt;akka-http-spray-json_2.12&lt;/artifactId&gt;
  &lt;version&gt;10.1.11&lt;/version&gt;
&lt;/dependency&gt;</code></pre></dd></dl></div><div class="group-java">
<p>JSON support is possible in <code>akka-http</code> by the use of Jackson, an external artifact (see <a href="common/json-support.html#jackson-support">JSON Support</a> for details):</p><dl class="dependency"><dt>sbt</dt><dd><pre class="prettyprint"><code class="language-scala">libraryDependencies += "com.typesafe.akka" %% "akka-http-jackson" % "10.1.11"</code></pre></dd><dt>Gradle</dt><dd><pre class="prettyprint"><code class="language-gradle">dependencies {
  compile group: 'com.typesafe.akka', name: 'akka-http-jackson_2.12', version: '10.1.11'
}</code></pre></dd><dt>Maven</dt><dd><pre class="prettyprint"><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;com.typesafe.akka&lt;/groupId&gt;
  &lt;artifactId&gt;akka-http-jackson_2.12&lt;/artifactId&gt;
  &lt;version&gt;10.1.11&lt;/version&gt;
&lt;/dependency&gt;</code></pre></dd></dl></div>
<p>A common use case is to reply to a request using a model object having the marshaller transform it into JSON. In this case shown by two separate routes. The first route queries an asynchronous database and marshalls the <span class="group-scala"><code>Future[Option[Item]]</code></span><span class="group-java"><code>CompletionStage&lt;Optional&lt;Item&gt;&gt;</code></span> result into a JSON response. The second unmarshalls an <code>Order</code> from the incoming request, saves it to the database and replies with an OK when done.</p>
<p>通常情况下用一个模型对像来回复请求，由 marshaller 将其转换为 JSON。这个用例展示了两个单独的路由。第一个路由查询一个异步数据库，并将 <span class="group-scala"><code>Future[Option[Item]]</code></span><span class="group-java"><code>CompletionStage&lt;Optional&lt;Item&gt;&gt;</code></span> 结果编组为 JSON 响应。第二个将入站请求解组为 <code>Order</code>，再保存它到数据库里，并在完成后以 OK 回复。</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/scala/docs/http/scaladsl/SprayJsonExampleSpec.scala#L53-L134" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.actor.ActorSystem
import akka.http.scaladsl.Http
import akka.stream.ActorMaterializer
import akka.Done
import akka.http.scaladsl.server.Route
import akka.http.scaladsl.server.Directives._
import akka.http.scaladsl.model.StatusCodes
// for JSON serialization/deserialization following dependency is required:
// &quot;com.typesafe.akka&quot; %% &quot;akka-http-spray-json&quot; % &quot;10.1.7&quot;
import akka.http.scaladsl.marshallers.sprayjson.SprayJsonSupport._
import spray.json.DefaultJsonProtocol._

import scala.io.StdIn

import scala.concurrent.Future

object WebServer {

  // needed to run the route
  implicit val system = ActorSystem()
  implicit val materializer = ActorMaterializer()
  // needed for the future map/flatmap in the end and future in fetchItem and saveOrder
  implicit val executionContext = system.dispatcher

  var orders: List[Item] = Nil

  // domain model
  final case class Item(name: String, id: Long)
  final case class Order(items: List[Item])

  // formats for unmarshalling and marshalling
  implicit val itemFormat = jsonFormat2(Item)
  implicit val orderFormat = jsonFormat1(Order)

  // (fake) async database query api
  def fetchItem(itemId: Long): Future[Option[Item]] = Future {
    orders.find(o =&gt; o.id == itemId)
  }
  def saveOrder(order: Order): Future[Done] = {
    orders = order match {
      case Order(items) =&gt; items ::: orders
      case _            =&gt; orders
    }
    Future { Done }
  }

  def main(args: Array[String]) {

    val route: Route =
      concat(
        get {
          pathPrefix(&quot;item&quot; / LongNumber) { id =&gt;
            // there might be no item for a given id
            val maybeItem: Future[Option[Item]] = fetchItem(id)

            onSuccess(maybeItem) {
              case Some(item) =&gt; complete(item)
              case None       =&gt; complete(StatusCodes.NotFound)
            }
          }
        },
        post {
          path(&quot;create-order&quot;) {
            entity(as[Order]) { order =&gt;
              val saved: Future[Done] = saveOrder(order)
              onComplete(saved) { done =&gt;
                complete(&quot;order created&quot;)
              }
            }
          }
        }
      )

    val bindingFuture = Http().bindAndHandle(route, &quot;localhost&quot;, 8080)
    println(s&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;)
    StdIn.readLine() // let it run until user presses return
    bindingFuture
      .flatMap(_.unbind()) // trigger unbinding from the port
      .onComplete(_ =&gt; system.terminate()) // and shutdown when done

  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/java/docs/http/javadsl/JacksonExampleTest.java#L7-L122" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.Done;
import akka.NotUsed;
import akka.actor.ActorSystem;
import akka.http.javadsl.ConnectHttp;
import akka.http.javadsl.Http;
import akka.http.javadsl.ServerBinding;
import akka.http.javadsl.marshallers.jackson.Jackson;
import akka.http.javadsl.model.HttpRequest;
import akka.http.javadsl.model.HttpResponse;
import akka.http.javadsl.model.StatusCodes;
import akka.http.javadsl.server.AllDirectives;
import akka.http.javadsl.server.Route;
import akka.stream.ActorMaterializer;
import akka.stream.javadsl.Flow;
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonProperty;

import java.util.List;
import java.util.Optional;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.CompletionStage;

import static akka.http.javadsl.server.PathMatchers.longSegment;

public class JacksonExampleTest extends AllDirectives {

  public static void main(String[] args) throws Exception {
    // boot up server using the route as defined below
    ActorSystem system = ActorSystem.create(&quot;routes&quot;);

    final Http http = Http.get(system);
    final ActorMaterializer materializer = ActorMaterializer.create(system);

    //In order to access all directives we need an instance where the routes are define.
    JacksonExampleTest app = new JacksonExampleTest();

    final Flow&lt;HttpRequest, HttpResponse, NotUsed&gt; routeFlow = app.createRoute().flow(system, materializer);
    final CompletionStage&lt;ServerBinding&gt; binding = http.bindAndHandle(routeFlow,
      ConnectHttp.toHost(&quot;localhost&quot;, 8080), materializer);

    System.out.println(&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;);
    System.in.read(); // let it run until user presses return

    binding
      .thenCompose(ServerBinding::unbind) // trigger unbinding from the port
      .thenAccept(unbound -&gt; system.terminate()); // and shutdown when done
  }

  // (fake) async database query api
  private CompletionStage&lt;Optional&lt;Item&gt;&gt; fetchItem(long itemId) {
    return CompletableFuture.completedFuture(Optional.of(new Item(&quot;foo&quot;, itemId)));
  }

  // (fake) async database query api
  private CompletionStage&lt;Done&gt; saveOrder(final Order order) {
    return CompletableFuture.completedFuture(Done.getInstance());
  }

  private Route createRoute() {

    return concat(
      get(() -&gt;
        pathPrefix(&quot;item&quot;, () -&gt;
          path(longSegment(), (Long id) -&gt; {
            final CompletionStage&lt;Optional&lt;Item&gt;&gt; futureMaybeItem = fetchItem(id);
            return onSuccess(futureMaybeItem, maybeItem -&gt;
              maybeItem.map(item -&gt; completeOK(item, Jackson.marshaller()))
                .orElseGet(() -&gt; complete(StatusCodes.NOT_FOUND, &quot;Not Found&quot;))
            );
          }))),
      post(() -&gt;
        path(&quot;create-order&quot;, () -&gt;
          entity(Jackson.unmarshaller(Order.class), order -&gt; {
            CompletionStage&lt;Done&gt; futureSaved = saveOrder(order);
            return onSuccess(futureSaved, done -&gt;
              complete(&quot;order created&quot;)
            );
          })))
    );
  }

  private static class Item {

    final String name;
    final long id;

    @JsonCreator
    Item(@JsonProperty(&quot;name&quot;) String name,
         @JsonProperty(&quot;id&quot;) long id) {
      this.name = name;
      this.id = id;
    }

    public String getName() {
      return name;
    }

    public long getId() {
      return id;
    }
  }

  private static class Order {

    final List&lt;Item&gt; items;

    @JsonCreator
    Order(@JsonProperty(&quot;items&quot;) List&lt;Item&gt; items) {
      this.items = items;
    }

    public List&lt;Item&gt; getItems() {
      return items;
    }
  }
}</code></pre></dd>
</dl>
<p>When you run this server, you can update the inventory via <code>curl -H &quot;Content-Type: application/json&quot; -X POST -d &#39;{&quot;items&quot;:[{&quot;name&quot;:&quot;hhgtg&quot;,&quot;id&quot;:42}]}&#39; http://localhost:8080/create-order</code> on your terminal - adding an item named <code>&quot;hhgtg&quot;</code> and having an <code>id=42</code>; and then view the inventory either in a browser, at a url like: <a href="http://localhost:8080/item/42">http://localhost:8080/item/42</a> - or on the terminal, via <code>curl http://localhost:8080/item/42</code>.</p>
<p>当你运行这个服务，你能通过你的终端 <code>curl -H &quot;Content-Type: application/json&quot; -X POST -d &#39;{&quot;items&quot;:[{&quot;name&quot;:&quot;hhgtg&quot;,&quot;id&quot;:42}]}&#39; http://localhost:8080/create-order</code> 来更新库存 - 添加 <code>id=42</code> 并且名为 <code>&quot;hhgtg&quot;</code> 的项目；然后在浏览器中查看库存，像这样的连接：<a href="http://localhost:8080/item/42">http://localhost:8080/item/42</a> - 或者通过终端 <code>curl http://localhost:8080/item/42</code> 。</p>
<p>The logic for the marshalling and unmarshalling JSON in this example is provided by the <span class="group-scala">&ldquo;spray-json&rdquo;</span><span class="group-java">&ldquo;Jackson&rdquo;</span> library (details on how to use that here: <span class="group-scala"><a href="common/json-support.html">JSON Support</a>)</span><span class="group-java"><a href="common/json-support.html#jackson-support">JSON Support</a>)</span>.</p>
<p>在这个示例里编组和解组 JSON 逻辑由 <span class="group-scala">&ldquo;spray-json&rdquo;</span><span class="group-java">&ldquo;Jackson&rdquo;</span> 库提供 (怎样使用的详细信息在这里: <span class="group-scala"><a href="common/json-support.html">JSON 支持</a>)</span><span class="group-java"><a href="common/json-support.html#jackson-support">JSON 支持</a>)</span></p>
<h2><a href="#streaming" name="streaming" class="anchor"><span class="anchor-link"></span></a>Streaming</h2>
<p><strong>流处理</strong></p>
<p>One of the strengths of Akka HTTP is that streaming data is at its heart meaning that both request and response bodies can be streamed through the server achieving constant memory usage even for very large requests or responses. Streaming responses will be backpressured by the remote client so that the server will not push data faster than the client can handle, streaming requests means that the server decides how fast the remote client can push the data of the request body.</p>
<p>Akka HTTP 的优势之一是流数据是它的核心，这意味着请求和响应可通过服务器流式传输，即使很大的请求或响应也能获得恒定的内存使用。流式响应将由远程客户端施加回压， 以使服务器不会推送超过客户端可处理速度的数据，流式请求意味着服务器决定远程客户端可以多快的速度推送请求正文。</p>
<p>Example that streams random numbers as long as the client accepts them:</p>
<p>以下的例子是向客户端输出一个随机数的数据流，只有客户端能接受的话：</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/scala/docs/http/scaladsl/HttpServerExampleSpec.scala#L467-L511" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.actor.ActorSystem
import akka.stream.scaladsl._
import akka.util.ByteString
import akka.http.scaladsl.Http
import akka.http.scaladsl.model.{ HttpEntity, ContentTypes }
import akka.http.scaladsl.server.Directives._
import akka.stream.ActorMaterializer
import scala.util.Random
import scala.io.StdIn

object WebServer {

  def main(args: Array[String]) {

    implicit val system = ActorSystem()
    implicit val materializer = ActorMaterializer()
    // needed for the future flatMap/onComplete in the end
    implicit val executionContext = system.dispatcher

    // streams are re-usable so we can define it here
    // and use it for every request
    val numbers = Source.fromIterator(() =&gt;
      Iterator.continually(Random.nextInt()))

    val route =
      path(&quot;random&quot;) {
        get {
          complete(
            HttpEntity(
              ContentTypes.`text/plain(UTF-8)`,
              // transform each number to a chunk of bytes
              numbers.map(n =&gt; ByteString(s&quot;$n\n&quot;))
            )
          )
        }
      }

    val bindingFuture = Http().bindAndHandle(route, &quot;localhost&quot;, 8080)
    println(s&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;)
    StdIn.readLine() // let it run until user presses return
    bindingFuture
      .flatMap(_.unbind()) // trigger unbinding from the port
      .onComplete(_ =&gt; system.terminate()) // and shutdown when done
  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/java/docs/http/javadsl/HttpServerStreamRandomNumbersTest.java#L8-L63" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.NotUsed;
import akka.actor.ActorSystem;
import akka.http.javadsl.ConnectHttp;
import akka.http.javadsl.Http;
import akka.http.javadsl.ServerBinding;
import akka.http.javadsl.model.*;
import akka.http.javadsl.server.AllDirectives;
import akka.http.javadsl.server.Route;
import akka.stream.ActorMaterializer;
import akka.stream.javadsl.Flow;
import akka.stream.javadsl.Source;
import akka.util.ByteString;

import java.util.Random;
import java.util.concurrent.CompletionStage;
import java.util.stream.Stream;

public class HttpServerStreamRandomNumbersTest extends AllDirectives {

  public static void main(String[] args) throws Exception {
    // boot up server using the route as defined below
    ActorSystem system = ActorSystem.create(&quot;routes&quot;);

    final Http http = Http.get(system);
    final ActorMaterializer materializer = ActorMaterializer.create(system);

    //In order to access all directives we need an instance where the routes are define.
    HttpServerStreamRandomNumbersTest app = new HttpServerStreamRandomNumbersTest();

    final Flow&lt;HttpRequest, HttpResponse, NotUsed&gt; routeFlow = app.createRoute().flow(system, materializer);
    final CompletionStage&lt;ServerBinding&gt; binding = http.bindAndHandle(routeFlow,
        ConnectHttp.toHost(&quot;localhost&quot;, 8080), materializer);

    System.out.println(&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;);
    System.in.read(); // let it run until user presses return

    binding
        .thenCompose(ServerBinding::unbind) // trigger unbinding from the port
        .thenAccept(unbound -&gt; system.terminate()); // and shutdown when done
  }


  private Route createRoute() {
    final Random rnd = new Random();
    // streams are re-usable so we can define it here
    // and use it for every request
    Source&lt;Integer, NotUsed&gt; numbers = Source.fromIterator(() -&gt; Stream.generate(rnd::nextInt).iterator());

    return concat(
        path(&quot;random&quot;, () -&gt;
            get(() -&gt;
                complete(HttpEntities.create(ContentTypes.TEXT_PLAIN_UTF8,
                    // transform each number to a chunk of bytes
                    numbers.map(x -&gt; ByteString.fromString(x + &quot;\n&quot;)))))));
  }
}</code></pre></dd>
</dl>
<p>Connecting to this service with a slow HTTP client would backpressure so that the next random number is produced on demand with constant memory usage on the server. This can be seen using curl and limiting the rate <code>curl --limit-rate 50b 127.0.0.1:8080/random</code></p>
<p>连接到服务的一个慢速 HTTP 客户端将产生回压，以便根据需要在服务器上以固定的内存使用来生成下一个随机数。使用 curl 和速率限制可以看到这种情况 <code>curl --limit-rate 50b 127.0.0.1:8080/random</code></p>
<p>Akka HTTP routes easily interact with actors. In this example one route allows for placing bids in a fire-and-forget style while the second route contains a request-response interaction with an actor. The resulting response is rendered as json and returned when the response arrives from the actor.</p>
<p>Akka HTTP 路由很容易与 actor 互动。在下面示例里，一个路由既可以用 fire-and-forget 风格，而同时第二个路由包含 request-response 方式与 actor 交互。 当响应从 actor 到达时，响应结果被渲染为 json 返回。</p>
<p><em>（译注：fire-and-forget 和 request-response 都是 actor 模型的请求交互处理模式，有关 Akka actor 交互模式的更多内容见：<a href="https://www.yangbajing.me/akka-cookbook/actor/pattern/index.html">常用交互模式</a>）</em></p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/scala/docs/http/scaladsl/HttpServerExampleSpec.scala#L517-L587" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.actor.{ Actor, ActorSystem, Props, ActorLogging }
import akka.http.scaladsl.Http
import akka.http.scaladsl.model.StatusCodes
import akka.http.scaladsl.server.Directives._
import akka.http.scaladsl.marshallers.sprayjson.SprayJsonSupport._
import akka.pattern.ask
import akka.stream.ActorMaterializer
import akka.util.Timeout
import spray.json.DefaultJsonProtocol._
import scala.concurrent.Future
import scala.concurrent.duration._
import scala.io.StdIn

object WebServer {

  case class Bid(userId: String, offer: Int)
  case object GetBids
  case class Bids(bids: List[Bid])

  class Auction extends Actor with ActorLogging {
    var bids = List.empty[Bid]
    def receive = {
      case bid @ Bid(userId, offer) =&gt;
        bids = bids :+ bid
        log.info(s&quot;Bid complete: $userId, $offer&quot;)
      case GetBids =&gt; sender() ! Bids(bids)
      case _       =&gt; log.info(&quot;Invalid message&quot;)
    }
  }

  // these are from spray-json
  implicit val bidFormat = jsonFormat2(Bid)
  implicit val bidsFormat = jsonFormat1(Bids)

  def main(args: Array[String]) {
    implicit val system = ActorSystem()
    implicit val materializer = ActorMaterializer()
    // needed for the future flatMap/onComplete in the end
    implicit val executionContext = system.dispatcher

    val auction = system.actorOf(Props[Auction], &quot;auction&quot;)

    val route =
      path(&quot;auction&quot;) {
        concat(
          put {
            parameter(&quot;bid&quot;.as[Int], &quot;user&quot;) { (bid, user) =&gt;
              // place a bid, fire-and-forget
              auction ! Bid(user, bid)
              complete((StatusCodes.Accepted, &quot;bid placed&quot;))
            }
          },
          get {
            implicit val timeout: Timeout = 5.seconds

            // query the actor for the current auction state
            val bids: Future[Bids] = (auction ? GetBids).mapTo[Bids]
            complete(bids)
          }
        )
      }

    val bindingFuture = Http().bindAndHandle(route, &quot;localhost&quot;, 8080)
    println(s&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;)
    StdIn.readLine() // let it run until user presses return
    bindingFuture
      .flatMap(_.unbind()) // trigger unbinding from the port
      .onComplete(_ =&gt; system.terminate()) // and shutdown when done

  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/java/docs/http/javadsl/HttpServerActorInteractionExample.java#L8-L132" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.NotUsed;
import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.actor.AbstractActor;
import akka.event.Logging;
import akka.event.LoggingAdapter;
import akka.http.javadsl.ConnectHttp;
import akka.http.javadsl.Http;
import akka.http.javadsl.ServerBinding;
import akka.http.javadsl.marshallers.jackson.Jackson;
import akka.http.javadsl.model.HttpRequest;
import akka.http.javadsl.model.HttpResponse;
import akka.http.javadsl.model.StatusCodes;
import akka.http.javadsl.server.AllDirectives;
import akka.http.javadsl.server.Route;
import akka.http.javadsl.unmarshalling.StringUnmarshallers;
import akka.stream.ActorMaterializer;
import akka.stream.javadsl.Flow;
import akka.util.Timeout;
import scala.concurrent.duration.FiniteDuration;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.CompletionStage;
import java.util.concurrent.TimeUnit;

import static akka.pattern.PatternsCS.ask;

public class HttpServerActorInteractionExample extends AllDirectives {

  private final ActorRef auction;

  public static void main(String[] args) throws Exception {
    // boot up server using the route as defined below
    ActorSystem system = ActorSystem.create(&quot;routes&quot;);

    final Http http = Http.get(system);
    final ActorMaterializer materializer = ActorMaterializer.create(system);

    //In order to access all directives we need an instance where the routes are define.
    HttpServerActorInteractionExample app = new HttpServerActorInteractionExample(system);

    final Flow&lt;HttpRequest, HttpResponse, NotUsed&gt; routeFlow = app.createRoute().flow(system, materializer);
    final CompletionStage&lt;ServerBinding&gt; binding = http.bindAndHandle(routeFlow,
      ConnectHttp.toHost(&quot;localhost&quot;, 8080), materializer);

    System.out.println(&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;);
    System.in.read(); // let it run until user presses return

    binding
      .thenCompose(ServerBinding::unbind) // trigger unbinding from the port
      .thenAccept(unbound -&gt; system.terminate()); // and shutdown when done
  }

  private HttpServerActorInteractionExample(final ActorSystem system) {
    auction = system.actorOf(Auction.props(), &quot;auction&quot;);
  }

  private Route createRoute() {
    return concat(
      path(&quot;auction&quot;, () -&gt; concat(
        put(() -&gt;
          parameter(StringUnmarshallers.INTEGER, &quot;bid&quot;, bid -&gt;
            parameter(&quot;user&quot;, user -&gt; {
              // place a bid, fire-and-forget
              auction.tell(new Bid(user, bid), ActorRef.noSender());
              return complete(StatusCodes.ACCEPTED, &quot;bid placed&quot;);
            })
          )),
        get(() -&gt; {
          final Timeout timeout = Timeout.durationToTimeout(FiniteDuration.apply(5, TimeUnit.SECONDS));
          // query the actor for the current auction state
          CompletionStage&lt;Bids&gt; bids = ask(auction, new GetBids(), timeout).thenApply((Bids.class::cast));
          return completeOKWithFuture(bids, Jackson.marshaller());
        }))));
  }

  static class Bid {
    final String userId;
    final int offer;

    Bid(String userId, int offer) {
      this.userId = userId;
      this.offer = offer;
    }
  }

  static class GetBids {

  }

  static class Bids {
    public final List&lt;Bid&gt; bids;

    Bids(List&lt;Bid&gt; bids) {
      this.bids = bids;
    }
  }

  static class Auction extends AbstractActor {

    private final LoggingAdapter log = Logging.getLogger(context().system(), this);

    List&lt;HttpServerActorInteractionExample.Bid&gt; bids = new ArrayList&lt;&gt;();

    static Props props() {
      return Props.create(Auction.class);
    }

    @Override
    public Receive createReceive() {
      return receiveBuilder()
        .match(HttpServerActorInteractionExample.Bid.class, bid -&gt; {
          bids.add(bid);
          log.info(&quot;Bid complete: {}, {}&quot;, bid.userId, bid.offer);
        })
        .match(HttpServerActorInteractionExample.GetBids.class, m -&gt; {
          sender().tell(new HttpServerActorInteractionExample.Bids(bids), self());
        })
        .matchAny(o -&gt; log.info(&quot;Invalid message&quot;))
        .build();
    }
  }
}</code></pre></dd>
</dl>
<p>When you run this server, you can add an auction bid via <code>curl -X PUT http://localhost:8080/auction?bid=22&amp;user=MartinO</code> on the terminal; and then you can view the auction status either in a browser, at the url <a href="http://localhost:8080/auction">http://localhost:8080/auction</a>, or, on the terminal, via <code>curl http://localhost:8080/auction</code>.</p>
<p>当你运行这个服务，你可以在终端上通过 <code>curl -X PUT http://localhost:8080/auction?bid=22&amp;user=MartinO</code> 添加拍卖出价；接着你可以通过浏览器在 url 地址 <a href="http://localhost:8080/auction">http://localhost:8080/auction</a> ，或者通过终端 <code>curl http://localhost:8080/auction</code> 查看拍卖状态。 </p>
<p>More details on how JSON marshalling and unmarshalling works can be found in the <a href="common/json-support.html">JSON Support section</a>.</p>
<p>有关 JSON 编组和解组工作的更多信息能在 <a href="common/json-support.html">JSON 支持</a> 找到。</p>
<p>Read more about the details of the high level APIs in the section <a href="routing-dsl/index.html">High-level Server-Side API</a>.</p>
<p>阅读有关高级 API 的更多信息在 <a href="routing-dsl/index.html">高级服务端 API</a> 部分。</p>
<h2><a href="#low-level-http-server-apis" name="low-level-http-server-apis" class="anchor"><span class="anchor-link"></span></a>Low-level HTTP server APIs</h2>
<p><strong>低级 HTTP 服务端 API</strong></p>
<p>The low-level Akka HTTP server APIs allows for handling connections or individual requests by accepting <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/model/HttpRequest.html" title="akka.http.javadsl.model.HttpRequest"><code>HttpRequest</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/model/HttpRequest.html" title="akka.http.scaladsl.model.HttpRequest"><code>HttpRequest</code></a></span> s and answering them by producing <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/model/HttpResponse.html" title="akka.http.javadsl.model.HttpResponse"><code>HttpResponse</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/model/HttpResponse.html" title="akka.http.scaladsl.model.HttpResponse"><code>HttpResponse</code></a></span> s. This is provided by the <code>akka-http-core</code> module, which is included automatically when you depend on <code>akka-http</code> but can also be used on its own. APIs for handling such request-responses as function calls and as a <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.5.26/?akka/stream/javadsl/Flow.html" title="akka.stream.javadsl.Flow"><code>Flow&lt;HttpRequest, HttpResponse, ?&gt;</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.5.26/akka/stream/scaladsl/Flow.html" title="akka.stream.scaladsl.Flow"><code>Flow[HttpRequest, HttpResponse, _]</code></a></span> are available.</p>
<p>低级 Akka HTTP 服务器 API 允许通过接受 <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/model/HttpRequest.html" title="akka.http.javadsl.model.HttpRequest"><code>HttpRequest</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/model/HttpRequest.html" title="akka.http.scaladsl.model.HttpRequest"><code>HttpRequest</code></a></span> 并生成 <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/model/HttpResponse.html" title="akka.http.javadsl.model.HttpResponse"><code>HttpResponse</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/model/HttpResponse.html" title="akka.http.scaladsl.model.HttpResponse"><code>HttpResponse</code></a></span> 应答来连接或单个请求。这由 <code>akka-http-core</code> 模块提供，当你依赖 <code>akka-http</code> 但没有使用它（<code>akka-http-core</code>）时将自动包含它的依赖。提供了处理函数调用或 <span class="group-java"><a href="https://doc.akka.io/japi/akka/2.5.26/?akka/stream/javadsl/Flow.html" title="akka.stream.javadsl.Flow"><code>Flow&lt;HttpRequest, HttpResponse, ?&gt;</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka/2.5.26/akka/stream/scaladsl/Flow.html" title="akka.stream.scaladsl.Flow"><code>Flow[HttpRequest, HttpResponse, _]</code></a></span> 形式的 request-response 的 API。</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/scala/docs/http/scaladsl/HttpServerExampleSpec.scala#L229-L269" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.actor.ActorSystem
import akka.http.scaladsl.Http
import akka.http.scaladsl.model.HttpMethods._
import akka.http.scaladsl.model._
import akka.stream.ActorMaterializer
import scala.io.StdIn

object WebServer {

  def main(args: Array[String]) {
    implicit val system = ActorSystem()
    implicit val materializer = ActorMaterializer()
    // needed for the future map/flatmap in the end
    implicit val executionContext = system.dispatcher

    val requestHandler: HttpRequest =&gt; HttpResponse = {
      case HttpRequest(GET, Uri.Path(&quot;/&quot;), _, _, _) =&gt;
        HttpResponse(entity = HttpEntity(
          ContentTypes.`text/html(UTF-8)`,
          &quot;&lt;html&gt;&lt;body&gt;Hello world!&lt;/body&gt;&lt;/html&gt;&quot;))

      case HttpRequest(GET, Uri.Path(&quot;/ping&quot;), _, _, _) =&gt;
        HttpResponse(entity = &quot;PONG!&quot;)

      case HttpRequest(GET, Uri.Path(&quot;/crash&quot;), _, _, _) =&gt;
        sys.error(&quot;BOOM!&quot;)

      case r: HttpRequest =&gt;
        r.discardEntityBytes() // important to drain incoming HTTP Entity stream
        HttpResponse(404, entity = &quot;Unknown resource!&quot;)
    }

    val bindingFuture = Http().bindAndHandleSync(requestHandler, &quot;localhost&quot;, 8080)
    println(s&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;)
    StdIn.readLine() // let it run until user presses return
    bindingFuture
      .flatMap(_.unbind()) // trigger unbinding from the port
      .onComplete(_ =&gt; system.terminate()) // and shutdown when done

  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/java/docs/http/javadsl/HttpServerLowLevelExample.java#L8-L55" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.actor.ActorSystem;
import akka.http.javadsl.ConnectHttp;
import akka.http.javadsl.Http;
import akka.http.javadsl.ServerBinding;
import akka.http.javadsl.model.ContentTypes;
import akka.http.javadsl.model.HttpResponse;
import akka.http.javadsl.model.StatusCodes;
import akka.stream.ActorMaterializer;
import akka.stream.Materializer;
import akka.util.ByteString;

import java.util.concurrent.CompletionStage;

public class HttpServerLowLevelExample {

  public static void main(String[] args) throws Exception {
    ActorSystem system = ActorSystem.create();

    try {
      final Materializer materializer = ActorMaterializer.create(system);
      CompletionStage&lt;ServerBinding&gt; serverBindingFuture =
        Http.get(system).bindAndHandleSync(
          request -&gt; {
            if (request.getUri().path().equals(&quot;/&quot;))
              return HttpResponse.create().withEntity(ContentTypes.TEXT_HTML_UTF8,
                ByteString.fromString(&quot;&lt;html&gt;&lt;body&gt;Hello world!&lt;/body&gt;&lt;/html&gt;&quot;));
            else if (request.getUri().path().equals(&quot;/ping&quot;))
              return HttpResponse.create().withEntity(ByteString.fromString(&quot;PONG!&quot;));
            else if (request.getUri().path().equals(&quot;/crash&quot;))
              throw new RuntimeException(&quot;BOOM!&quot;);
            else {
              request.discardEntityBytes(materializer);
              return HttpResponse.create().withStatus(StatusCodes.NOT_FOUND).withEntity(&quot;Unknown resource!&quot;);
            }
          }, ConnectHttp.toHost(&quot;localhost&quot;, 8080), materializer);

      System.out.println(&quot;Server online at http://localhost:8080/\nPress RETURN to stop...&quot;);
      System.in.read(); // let it run until user presses return

      serverBindingFuture
        .thenCompose(ServerBinding::unbind) // trigger unbinding from the port
        .thenAccept(unbound -&gt; system.terminate()); // and shutdown when done

    } catch (RuntimeException e) {
      system.terminate();
    }
  }
}</code></pre></dd>
</dl>
<p>Read more details about the low level APIs in the section <a href="server-side/low-level-api.html">Core Server API</a>.</p>
<p>阅读有关低级 API 的更多信息在 <a href="server-side/low-level-api.html">核心服务 API</a> 部分。</p>
<h2><a href="#http-client-api" name="http-client-api" class="anchor"><span class="anchor-link"></span></a>HTTP client API</h2>
<p><strong>HTTP 客户端 API</strong></p>
<p>The client APIs provide methods for calling a HTTP server using the same <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/model/HttpRequest.html" title="akka.http.javadsl.model.HttpRequest"><code>HttpRequest</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/model/HttpRequest.html" title="akka.http.scaladsl.model.HttpRequest"><code>HttpRequest</code></a></span> and <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/model/HttpResponse.html" title="akka.http.javadsl.model.HttpResponse"><code>HttpResponse</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/model/HttpResponse.html" title="akka.http.scaladsl.model.HttpResponse"><code>HttpResponse</code></a></span> abstractions that Akka HTTP server uses but adds the concept of connection pools to allow multiple requests to the same server to be handled more performantly by re-using TCP connections to the server.</p>
<p>客户端 API 使用相同的 <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/model/HttpRequest.html" title="akka.http.javadsl.model.HttpRequest"><code>HttpRequest</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/model/HttpRequest.html" title="akka.http.scaladsl.model.HttpRequest"><code>HttpRequest</code></a></span> 和 <span class="group-java"><a href="https://doc.akka.io/japi/akka-http/current/?akka/http/javadsl/model/HttpResponse.html" title="akka.http.javadsl.model.HttpResponse"><code>HttpResponse</code></a></span><span class="group-scala"><a href="https://doc.akka.io/api/akka-http/current/akka/http/scaladsl/model/HttpResponse.html" title="akka.http.scaladsl.model.HttpResponse"><code>HttpResponse</code></a></span> 抽像以提供方法来调用一个 HTTP 服务。Akka HTTP 服务器添加了连接池的概念，以允许到相同服务的多个请求复用 TCP 连接，从而使处理更多高效。 </p>
<p>Example simple request:</p>
<p>请求简单示例：</p>
<dl>
  <dt>Scala</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/scala/docs/http/scaladsl/HttpClientExampleSpec.scala#L328-L351" target="_blank" title="Go to snippet source"></a><code class="language-scala">import akka.actor.ActorSystem
import akka.http.scaladsl.Http
import akka.http.scaladsl.model._
import akka.stream.ActorMaterializer

import scala.concurrent.Future
import scala.util.{ Failure, Success }

object Client {
  def main(args: Array[String]): Unit = {
    implicit val system = ActorSystem()
    implicit val materializer = ActorMaterializer()
    // needed for the future flatMap/onComplete in the end
    implicit val executionContext = system.dispatcher

    val responseFuture: Future[HttpResponse] = Http().singleRequest(HttpRequest(uri = &quot;http://akka.io&quot;))

    responseFuture
      .onComplete {
        case Success(res) =&gt; println(res)
        case Failure(_)   =&gt; sys.error(&quot;something wrong&quot;)
      }
  }
}</code></pre></dd>
  <dt>Java</dt>
  <dd>
  <pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/test/java/docs/http/javadsl/ClientSingleRequestExample.java#L13-L30" target="_blank" title="Go to snippet source"></a><code class="language-java">import akka.actor.ActorSystem;
import akka.http.javadsl.Http;
import akka.http.javadsl.model.*;
import akka.http.javadsl.server.examples.petstore.Pet;
import akka.stream.Materializer;

import java.util.concurrent.CompletionStage;

public class ClientSingleRequestExample {

  public static void main(String[] args) {
    final ActorSystem system = ActorSystem.create();

    final CompletionStage&lt;HttpResponse&gt; responseFuture =
      Http.get(system)
        .singleRequest(HttpRequest.create(&quot;https://akka.io&quot;));
  }
}</code></pre></dd>
</dl>
<p>Read more about the details of the client APIs in the section <a href="client-side/index.html">Consuming HTTP-based Services (Client-Side)</a>.</p>
<p>阅读有关客户端 API 的更多信息在 <a href="client-side/index.html">Consuming HTTP-based Services (Client-Side)</a> 部分。 </p>
<h2><a href="#the-modules-that-make-up-akka-http" name="the-modules-that-make-up-akka-http" class="anchor"><span class="anchor-link"></span></a>The modules that make up Akka HTTP</h2>
<p><strong>组织 Akka HTTP 的更多模块</strong></p>
<p>Akka HTTP is structured into several modules:</p>
<p>Akka HTTP 由以下几个模块构成：</p>
<dl>
  <dt>akka-http
  </dt>
  <dd>Higher-level functionality, like (un)marshalling, (de)compression as well as a powerful DSL for defining HTTP-based APIs on the server-side, this is the recommended way to write HTTP servers with Akka HTTP. Details can be found in the section <a href="routing-dsl/index.html">High-level Server-Side API</a></dd>
  <dd>
  <p>高级功能，例如解组/编组（(un)marshalling）、解压/压缩（(de)compression）以及强大的DSL用于在服务器端定义基于 HTTP 的应用程序 API，使用这套 DSL 来编写 HTTP 服务是 Akka HTTP 的推荐方式。详细内容可在 <a href="routing-dsl/index.html">高级服务端 API</a> 部分找到。</p></dd>
  <dt>akka-http-core
  </dt>
  <dd>A complete, mostly low-level, server- and client-side implementation of HTTP (incl. WebSockets) Details can be found in sections <a href="server-side/low-level-api.html">Core Server API</a> and <a href="client-side/index.html">Consuming HTTP-based Services (Client-Side)</a></dd>
  <dd>
  <p>一个完整的、大多数低级的、服务器-和客户端 HTTP 实现（包括 WebSocket）。详细内容能在 <a href="server-side/low-level-api.html">核心服务 API</a> 和 <a href="client-side/index.html">消费基于 HTTP 的服务 (客户端)</a> 部分找到。</p></dd>
  <dt>akka-http-testkit
  </dt>
  <dd>A test harness and set of utilities for verifying server-side service implementations</dd>
  <dd>
  <p>测试套件以及工具集，用以验证服务器端服务的实现</p></dd>
  <dt>@@@ div { .group-scala }
  </dt>
  <dt>akka-http-spray-json
  </dt>
  <dd>Predefined glue-code for (de)serializing custom types from/to JSON with <a href="https://github.com/spray/spray-json">spray-json</a> Details can be found here: <a href="common/json-support.html">JSON Support</a></dd>
  <dd>
  <p>预设好的胶水代码用于自定义类型与 JSON 之间的（反）序列化，使用 <a href="https://github.com/spray/spray-json">spary-json</a>。详细内容能在这里找到：@ref<a href="common/json-support.md">JSON Support</a> @@@</p></dd>
  <dt>@@@ div { .group-scala }
  </dt>
  <dt>akka-http-xml
  </dt>
  <dd>Predefined glue-code for (de)serializing custom types from/to XML with <a href="https://github.com/scala/scala-xml">scala-xml</a> Details can be found here: <a href="common/xml-support.html">XML Support</a></dd>
  <dd>
  <p>预设好的胶水代码用于自定义类型与 XML 之间的（反）序列化，使用 <a href="https://github.com/scala/scala-xml">scala-xml</a>。详细内容能在这里找到：@ref<a href="common/xml-support.md">XML Support</a> @@@ @@@ div { .group-java } akka-http-jackson</p></dd>
  <dd>Predefined glue-code for (de)serializing custom types from/to JSON with <a href="https://github.com/FasterXML/jackson">jackson</a></dd>
  <dd>
  <p>预设好的胶水代码用户自定义类型与 JSON 之间的（反）序列化，使用 <a href="https://github.com/FasterXML/jackson">jackson</a> @@@</p></dd>
</dl>
</div>
</article>
<div class="row">
<div class="small-12 column">
<section class="nav-prev-next row">
<div class="nav-prev small-6 column">
<a href="release-notes/10.0.x.html"><i class="icon-prev"></i> <span class="link-prev">10.0.x Release Notes</span></a>
</div>
<div class="nav-next small-6 column clearfix">
<a class="float-right" href="usage.html">2. 使用 <i class="icon-next"></i></a>
</div>
</section>
</div>
</div>
<div class="source-github row">
Found an error in this documentation? The source code for this page can be found <a href="https://github.com/akka/akka-http/tree/v10.1.11/docs-zh/src/main/paradox/introduction.md">here</a>.
Please feel free to edit and contribute a pull request.
</div>

<footer class="page-footer row clearfix">
<img class="akka-icon float-left show-for-medium" src="images/akka-icon.svg" />
<section class="copyright">
<div>Akka HTTP 10.1.11 Chinese edition is Open Source and available under the Apache 2 License.</div>
<p class="legal">
&copy; 2011-2020 <a href="https://www.lightbend.com" target="_blank">Lightbend, Inc.</a> |
<a href="https://www.lightbend.com/legal/licenses" target="_blank">Licenses</a> |
<a href="https://www.lightbend.com/legal/terms" target="_blank">Terms</a> |
<a href="https://www.lightbend.com/legal/privacy" target="_blank">Privacy Policy</a> |
<a href="https://akka.io/cookie/" target="_blank">Cookie Listing</a> |
<a class="optanon-toggle-display">Cookie Settings</a>
</p>
</section>

</footer>
</section>
</main>
</div>

<script type="text/javascript" src="js/scrollsneak.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/groups.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/magellan.js"></script>
<script type="text/javascript" src="js/metadata-toggle.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">//<![CDATA[
jQuery(function(){window.prettyPrint && prettyPrint()});
//]]></script>
<!-- Algolia docs search -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<style>.algolia-autocomplete { display: block !important }</style>
<script type="text/javascript">
docsearch({
apiKey: '0ccbb8bf5148554a406fbf07df0a93b9',
indexName: 'akka-http',
inputSelector: '#search',
algoliaOptions: {
hitsPerPage: 5
}
});

docsearch({
apiKey: '0ccbb8bf5148554a406fbf07df0a93b9',
indexName: 'akka-http',
inputSelector: '#overlay-search',
algoliaOptions: {
hitsPerPage: 5
}
});

// set up "/" as global shortcut for focusing on search
jQuery(document).keypress(function (event) {
if (event.keyCode == 47) {
jQuery("#search").focus();
return false; // swallow key event, otherwise the / char would be input into the search box
}
});
</script>

<script type="text/javascript" src="assets/js/warnOldDocs.js"></script>


</body>
</html>
